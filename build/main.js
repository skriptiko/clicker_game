!function(t){var i={};function e(h){if(i[h])return i[h].exports;var s=i[h]={i:h,l:!1,exports:{}};return t[h].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,h){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:h})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var h=Object.create(null);if(e.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(h,s,function(i){return t[i]}.bind(null,s));return h},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="build/",e(e.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";function PLDragObject(t,i){this.type="PLDragObject",this.fun=t;var e=this;this.draggable=!0,this.arrBtnEventTransfer=[0],this._uniformScaling=!1,this.aspectRatio=1,this._oppositeCenter=!1,this._boolFont=!0,this._scaleRect=1,this._butRot=!0,this._normDrag="null",this._widthNot=!1,this._heightNot=!1,this._upBtnRot=!1,this._distRot=!1,this._mashtab=1,this._parent,this._boolKrai=!1,this._rectangle=new Rectangle(-50,-50,100,100),this.rectAbsolut=new Rectangle(-50,-50,100,100),this.content=new PIXI.Container,this._angel=0,this.isKontur=!0,this.backGround=null,this.isDown=!1,this.angelMove=null,this.vectorMove=null,this._otstupKrai=0,this._interactive=!0,this.rectArea=new PIXI.Rectangle(0,0,1,1),this.borderRect=new Rectangle(-1/0,-1/0,1/0,1/0),this.contentM=new PIXI.Container,this.content.addChild(this.contentM),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this.graphics2=new PIXI.Graphics,this.contentM.addChild(this.graphics2),this.graphics3=new PIXI.Graphics,this.contentM.addChild(this.graphics3),this.debug=!1,1==this.debug&&(this.graphics2.lineStyle(2,65280,1),this.graphics2.drawCircle(0,0,10),this.graphics3.lineStyle(2,16711680,1),this.graphics3.drawCircle(0,0,20)),this.tipDrag="null",this._wh=pl102.wh,this._wh2=2*pl102.wh,this._minDrag=20,this.minDragH=20,this.minDragW=20,this.maxDragH=1e8,this.maxDragW=1e8,this.scaleDebag=1,this.angelStep=Math.PI/2,this.angelSah=.1,this.pivot=new Position(.5,.5),this.pivotDrag=new Position,this.center=new Position,this.centerPoint=new Position;var h,s,n,a,o,r=!1,c=new Position;this.pointCA=new Position;var l,u,d,g,p,f,w,_,m,y,v=new Position,b=new Position,x=new Position,P=(new Position,new Rectangle),C=new Position,I=new Position,B=new Position,M=(new Position,new Position);this.okSob=!0,this.contentPoint=new PIXI.Container,this.content.addChild(this.contentPoint),this.contentPlus=new PIXI.Container,this.content.addChild(this.contentPlus),this.content1=new PIXI.Container,this.distanceRotation=new DistanceRotationCircle(this.content1,function(){-1!=e.angelStep&&(this.angel=calc.okrugAngel(this.angel,e.angelStep,e.angelSah));var t=this.angel,i=e.pivot.x,h=e.pivot.y;e.pivot.set(.5,.5),e.setCenter(e.pivot),e.angel=t,e.pivot.set(i,h),e.butDown=this.type,e.tipDrag="rotation",e.fun&&e.fun()}),this.distanceRotation.funDown=function(){e.funMouseDown&&e.funMouseDown()},this.distanceRotation.funUp=function(){e.funUp&&e.funUp()},this.distanceRotation.activ=this._distRot,this.content1.addChild(this.content);var D=new LinePosition;var R,k=new LinePosition,E=new LinePosition;this.boolChanges=!1,this.funMouseMove,this.stageMove=function(t){if(y=e.content1.toLocal(pl102.global),null!==e.angelMove&&function(){calc.getVector(999999999,e.angelMove,D.p),calc.getVector(-999999999,e.angelMove,D.p1),D.p.x+=m.x,D.p.y+=m.y,D.p1.x+=m.x,D.p1.y+=m.y;var t=calc.isPointInLin(D.p,D.p1,e.content1.toLocal(pl102.global),999999999,0);y.set(t.x,t.y)}(),null!=e.vectorMove&&function(){calc.getVector(99999,90*calc.DEG2RAD,k.p),calc.getVector(-99999,90*calc.DEG2RAD,k.p1),k.p.x+=m.x,k.p.y+=m.y,k.p1.x+=m.x,k.p1.y+=m.y,calc.getVector(99999,0*calc.DEG2RAD,E.p),calc.getVector(-99999,0*calc.DEG2RAD,E.p1),E.p.x+=m.x,E.p.y+=m.y,E.p1.x+=m.x,E.p1.y+=m.y;var t=calc.isPointInLin(k.p,k.p1,e.content1.toLocal(pl102.global),e.vectorMove/e._mashtab,0),i=calc.isPointInLin(E.p,E.p1,e.content1.toLocal(pl102.global),e.vectorMove/e._mashtab,0);null!=t&&null==i&&y.set(t.x,t.y),null!=i&&null==t&&y.set(i.x,i.y),null!=i&&null!=t&&y.set(m.x,m.y)}(),x.set(y.x-m.x,y.y-m.y),C.set(x.x+b.x,x.y+b.y),C.x<=1&&C.x>=-1&&C.y<=1&&C.y>=-1&&C.z<=1&&C.z>=-1?e.boolChanges=!1:e.boolChanges=!0,20!=l&&(M.set(y.x,y.y),calc.rotationPoint(M,-e._rectangle.angel,m),x.set(M.x-m.x,M.y-m.y),C.set(x.x+b.x,x.y+b.y)),R=calc.getAngle(C,I)*calc.RAD2DEG,8==l&&(e.zdvig("height",C,!1),e.zdvig("width",C,!1)),7==l&&e.zdvig("height",C,!1),6==l&&(e.zdvig("height",C,!1),C.x+=P.x,e.zdvig("width",C,!0)),5==l&&e.zdvig("width",C,!1),4==l&&e.zdvig("korectC",C),3==l&&(C.x+=P.x,e.zdvig("width",C,!0)),2==l&&(e.zdvig("width",C,!1),C.y+=P.y,e.zdvig("height",C,!0)),1==l&&(C.y+=P.y,e.zdvig("height",C,!0)),0==l&&(C.x+=P.x,e.zdvig("width",C,!0),C.y+=P.y,e.zdvig("height",C,!0)),l>=10&&l<20){var i=O-(w-calc.getAngle(e.content1.toGlobal(e.rectangle.p),pl102.global));-1!=e.angelStep?(i=calc.okrugAngel(i,e.angelStep,e.angelSah),e.zdvig("angel",i)):e.zdvig("angel",i)}20==l&&(C.x=P.p.x+x.x,C.y=P.p.y+x.y,e.draggable&&e.zdvig("posit",C)),e.bw=e.rectangle.width,e.bh=e.rectangle.height,e.bx=e.rectangle.x,e.by=e.rectangle.y,e.funMouseMove&&e.funMouseMove(t)},this.chekZdvigTip=function(t){return(!this._widthNot||"width"!=t)&&(!this._heightNot||"height"!=t)},this.chekOutOfBorder=function(t){t.x<this.borderRect.x+e._rectangle.width*this.pivot.x?t.x=this.borderRect.x+e._rectangle.width*this.pivot.x:t.x>this.borderRect.width-e._rectangle.width*this.pivot.x&&(t.x=this.borderRect.width-e._rectangle.width*this.pivot.x),t.y<this.borderRect.y+e._rectangle.height*this.pivot.y?t.y=this.borderRect.y+e._rectangle.height*this.pivot.y:t.y>this.borderRect.height-e._rectangle.height*this.pivot.y&&(t.y=this.borderRect.height-e._rectangle.height*this.pivot.y)};var S=2,L=0,A=0;this.zdvig=function(t,i,h){e.chekZdvigTip(t)&&(0==this.oppositeCenter?(S=2,L=P.width/2,A=P.height/2):(S=1,L=0,A=0),"height"==t&&(0==h?((g=i.y-e._rectangle.y+A)<this.minDrag&&(g=this.minDrag),g<this.minDragH&&(g=this.minDragH),g>this.maxDragH&&(g=this.maxDragH),p=g/e._rectangle.height*e._rectangle.y,e._rectangle.height=g,e._rectangle.y=p):((p=i.y-P.y-A)>-this.minDrag/S&&(p=-this.minDrag/S),p>-this.minDragH/S&&(p=-this.minDragH/S),p<-this.maxDragH/S&&(p=-this.maxDragH/S),(g=P.height*p/P.y)<this.minDrag/S&&(g=this.minDrag/S),g<this.minDragH/S&&(g=this.minDragH/S),e._rectangle.height=g,e._rectangle.y=p),e.chekOutOfBorder(e._rectangle.p),this.draw102()),"width"==t&&(0==h?((g=i.x-e._rectangle.x+L)<this.minDrag&&(g=this.minDrag),g<this.minDragW&&(g=this.minDragW),g>this.maxDragW&&(g=this.maxDragW),p=g/e._rectangle.width*e._rectangle.x,e._rectangle.width=g,e._rectangle.x=p):((p=i.x-P.x-L)>-this.minDrag/S&&(p=-this.minDrag/S),p>-this.minDragW/S&&(p=-this.minDragW/S),p<-this.maxDragW/S&&(p=-this.maxDragW/S),(g=P.width*p/P.x)<this.minDrag/S&&(g=this.minDrag/S),g<this.minDragW/S&&(g=this.minDragW/S),e._rectangle.width=g,e._rectangle.x=p),e.chekOutOfBorder(e._rectangle.p),this.draw102()),"korectC"==t&&(p=calc.getDistance(i,I),f=calc.getAngle(i,I),calc.getVector(p,f+e._rectangle.angel+Math.PI,B),B.x+=P.p.x,B.y+=P.p.y,e._rectangle.p.y=B.y,e._rectangle.p.x=B.x,e._rectangle.y=P.y-i.y,e._rectangle.x=P.x-i.x,this.draw102()),"posit"==t&&(e.chekOutOfBorder(i),e._widthNot||(e._rectangle.p.x=i.x),e._heightNot||(e._rectangle.p.y=i.y),this.draw102()),"angel"==t&&(e._rectangle.angel=i,e.chekOutOfBorder(e._rectangle.p),this.draw102()),this.positAbcolut(),e.uniformScaling&&(this.getTipProporcion()?(e.updateProporcion(!0),e.updateProporcion(!1)):(e.updateProporcion(!1),e.updateProporcion(!0))),this.positAbcolut(),1==e.okSob&&e.fun&&e.fun())},this.pointCB=new Position,this.positAbcolut=function(){c.x=this._rectangle.x+this._rectangle.width/2,c.y=this._rectangle.y+this._rectangle.height/2,d=calc.getAngle(I,c),u=calc.getDistance(I,c),calc.getVector(u,d+e._rectangle.angel,this.pointCA),this.pointCA.x+=e._rectangle.p.x,this.pointCA.y+=e._rectangle.p.y,c.x=this._rectangle.x,c.y=this._rectangle.y,d=calc.getAngle(I,c),u=calc.getDistance(I,c),calc.getVector(u,d+e._rectangle.angel,this.pointCB),this.pointCB.x+=e._rectangle.p.x,this.pointCB.y+=e._rectangle.p.y,this.rectAbsolut.p.x=this.pointCB.x,this.rectAbsolut.p.y=this.pointCB.y,this.rectAbsolut.x=0,this.rectAbsolut.y=0,this.rectAbsolut.width=this._rectangle.width,this.rectAbsolut.height=this._rectangle.height,this.rectAbsolut.angel=e._rectangle.angel,1==this.debug&&(this.graphics2.x=this.rectAbsolut.x,this.graphics2.y=this.rectAbsolut.y)},this.getTipProporcion=function(){return r=!0,0==l&&(r=R>-135&&R<45),1!=l&&7!=l||(r=!1),2==l&&R>-45&&R<135&&(r=!1),3!=l&&5!=l||(r=!0),6==l&&(r=R>-45&&R<135),8==l&&(r=!(R>-135&&R<45)),r},this.updateProporcion=function(t){return e.rectangle.width=Math.min(e.rectangle.width,e.maxDragW),e.rectangle.height=Math.min(e.rectangle.height,e.maxDragH),e.rectangle.width=Math.max(e.rectangle.width,e.minDragW),e.rectangle.height=Math.max(e.rectangle.height,e.minDragH),h=e.rectangle.width/e.rectangle.height,Math.abs(h-e.aspectRatio)>1e-5&&(t?(s=e.rectangle.height,e.rectangle.height=e.rectangle.width/e.aspectRatio,e.rectangle.width=e.rectangle.height*e.aspectRatio):(s=e.rectangle.width,e.rectangle.width=e.rectangle.height*e.aspectRatio,e.rectangle.height=e.rectangle.width/e.aspectRatio),0==e.oppositeCenter?(e.rectangle.x=-e.rectangle.width/2,e.rectangle.y=-e.rectangle.height/2):(n=(s-e.rectangle.height)/2,o=1,(a=e.rectangle.y+n)<0&&(o=-1),Math.abs(a)>e.rectangle.height&&(a=e.rectangle.height*o),e.rectangle.y=e.rectangle.height*o*e.pivot.y,n=(s-e.rectangle.width)/2,o=1,(a=e.rectangle.x+n)<0&&(o=-1),Math.abs(a)>e.rectangle.width&&(a=e.rectangle.width*o),e.rectangle.x=e.rectangle.width*o*e.pivot.x),this.draw102(),!0)},this.funUp,this.okUp=!1,this.notZdvig=!1,this.stageUp=function(t){pl102.interaction.isNotChangeCursorMouseOverOut=!1,e.isDown=!1,e.updateCursor(),e.buttonDragAll._mashtab=-1,e.buttonDragAll.mashtab=e._mashtab,e.buttonDragAll.activBat(999),pl102.isMouseEvents&&(pl102.stage.off("mousemove",e.stageMove),pl102.stage.off("mouseup",e.stageUp)),pl102.isTouchEvents&&(pl102.stage.off("touchmove",e.stageMove),pl102.stage.off("touchend",e.stageUp)),1==e.okUp&&e.funUp&&e.funUp(),e.tipDrag="null",e.okUp=!1},this.chekOppositeCenter=function(t){if(e.oppositeCenter){if(0==t||t-10==0)e.pivot.x=1,e.pivot.y=1;else if(1==t||t-10==1)e.pivot.x=.5,e.pivot.y=1;else if(2==t||t-10==2)e.pivot.x=0,e.pivot.y=1;else if(3==t||t-10==3)e.pivot.x=1,e.pivot.y=.5;else{if(4==t||20==t)return;if(5==t||t-10==5)e.pivot.x=0,e.pivot.y=.5;else if(6==t||t-10==6)e.pivot.x=1,e.pivot.y=0;else if(7==t||t-10==7)e.pivot.x=.5,e.pivot.y=0;else{if(8!=t&&t-10!=8)return;e.pivot.x=0,e.pivot.y=0}}e.setCenter(e.pivot)}};var O=0;this.butDown=0,this.boolDrag=!0,this.funDown=function(t){!pl102.devas&&t&&-1==e.arrBtnEventTransfer.indexOf(t.data.originalEvent.button)||(e.boolChanges=!1,e.isDown=!0,pl102.interaction.isNotChangeCursorMouseOverOut=!0,e.tipDrag="null",l=this.name,e.butDown=this.name,20!=l&&4!=l&&0==e.notZdvig&&(e.pivot.x=e.pivot.y=.5,e.setCenter(e.pivot),e.tipDrag="drag"),e.boolDrag=!1,null==l?e.boolDrag=!0:(l>=0&&l<=8&&(e.tipDrag="scale"),l>=10&&l<=18&&(e.tipDrag="rotation"),20==l&&(e.boolDrag=!0),4==l&&(e.boolDrag=!0)),e.buttonDragAll.activBat(l),null==this.position?(b.setPoint(new Position),l=20):(b.x=this.parent.x,b.y=this.parent.y),v.set(pl102.global.x,pl102.global.y),P.setRect(e._rectangle),e.centerPoint.x=e.rectangle.p.x,e.centerPoint.y=e.rectangle.p.y,_=e.content1.toGlobal(e.centerPoint),m=e.content1.toLocal(pl102.global),w=calc.getAngle(_,v),O=e.rectangle.angel,e.chekOppositeCenter(this.name),e.positAbcolut(),e.funMouseDown&&e.funMouseDown(),pl102.isMouseEvents&&(pl102.stage.off("mousemove",e.stageMove),pl102.stage.on("mousemove",e.stageMove)),pl102.isTouchEvents&&(pl102.stage.off("touchmove",e.stageMove),pl102.stage.on("touchmove",e.stageMove)),e.startMouse())},this.startMouse=function(){0==e.okUp&&(e.okUp=!0),pl102.isMouseEvents&&(pl102.stage.off("mouseup",e.stageUp),pl102.stage.on("mouseup",e.stageUp)),pl102.isTouchEvents&&(pl102.stage.off("touchend",e.stageUp),pl102.stage.on("touchend",e.stageUp))},this.contentM.interactive=!0,pl102.isMouseEvents&&this.contentM.on("mousedown",this.funDown),pl102.isTouchEvents&&this.contentM.on("touchstart",this.funDown),this.contentM.name=20,this.startAlphaBtnRot=.2,this.buttonDragAll=new ButtonDragAll(this),this.content.addChild(this.contentM);var X,T=new Position;this.draw102=function(){this.updateCursor(),this.content.position.x=this._rectangle.p.x,this.content.position.y=this._rectangle.p.y,this.content.rotation=this._rectangle.angel,1==this._boolFont&&this._interactive?this.contentM.hitArea=this.rectArea:this.contentM.hitArea=null,this.rectArea.x=this._rectangle.x,this.rectArea.y=this._rectangle.y,this.rectArea.width=this._rectangle.width,this.rectArea.height=this._rectangle.height,this.drawBut(),this.drawGraph102(),X=calc.getDistance(this.buttonDragAll.array[0],I),calc.getVector(X,-this.content.rotation,T),this.contentPoint.position.x=T.x,this.contentPoint.position.y=T.y,this.contentPoint.rotation=-this.content.rotation,this.contentPlus.rotation=-this.content.rotation,this.positAbcolut(),this.distanceRotation.draw(this.rectAbsolut)},this.drawGraph102=function(){this.graphics.clear(),0!=this._otstupKrai&&(this.graphics.beginFill(pl102.color1,.4),this.graphics.drawRect(this._rectangle.x-this._otstupKrai,this._rectangle.y-this._otstupKrai,this._rectangle.width+2*this._otstupKrai,this._otstupKrai),this.graphics.drawRect(this._rectangle.x-this._otstupKrai,this._rectangle.y+this._rectangle.height,this._rectangle.width+2*this._otstupKrai,this._otstupKrai),this.graphics.drawRect(this._rectangle.x-this._otstupKrai,this._rectangle.y,this._otstupKrai,this._rectangle.height),this.graphics.drawRect(this._rectangle.x+this._rectangle.width,this._rectangle.y,this._otstupKrai,this._rectangle.height),this.graphics.endFill()),null!==this.backGround&&this.graphics.beginFill(this.backGround,.5),this.isKontur&&(this.graphics.lineStyle(1/this._mashtab,pl102.color1,1),this.graphics.drawRect(this._rectangle.x,this._rectangle.y,this._rectangle.width,this._rectangle.height))},this.drawBut=function(){this.buttonDragAll.drawBut()},null!=i&&(this.boolKrai=i),this.visiBtn=function(t,i){this.buttonDragAll.visiBtn(t,i)},this.loadImgForBtnControl=function(t,i,e){this.buttonDragAll.loadImgForBtnControl(t,i,e)},this.setCenter=function(t,i){if(null!=i&&(this.okSob=!1),this.pivot=t||this.pivot,20==l)b.setPoint(new Position);else for(var h=0;h<this.buttonDragAll.array.length;h++)if(this.buttonDragAll.array[h].name==l){b.setPoint(this.buttonDragAll.array[h]);break}if(P.setRect(e._rectangle),this.center.x=e.rectangle.x+e.rectangle.width/2,this.center.y=e.rectangle.y+e.rectangle.height/2,e.zdvig("korectC",this.center),P.setRect(e._rectangle),this.pivotDrag.x=-e.rectangle.width/2+e.rectangle.width*this.pivot.x,this.pivotDrag.y=-e.rectangle.height/2+e.rectangle.height*this.pivot.y,e.zdvig("korectC",this.pivotDrag),v.set(pl102.global.x,pl102.global.y),P.setRect(e._rectangle),this.centerPoint.x=e.rectangle.p.x,this.centerPoint.y=e.rectangle.p.y,_=e.content1.toGlobal(this.centerPoint),w=calc.getAngle(_,v),m=e.content1.toLocal(pl102.global),20==l)b.setPoint(new Position);else for(h=0;h<this.buttonDragAll.array.length;h++)this.buttonDragAll.array[h].name==l&&b.setPoint(this.buttonDragAll.array[h]);null!=i&&(this.okSob=!0)},this.updateCursor=function(){this.buttonDragAll.updateCursor()},this.wh=10,this.wh2=40,this.interactive=!0}function ButtonDragAll(t){this._wh=10,this._wh2=10,this._normDrag="null",this.array=[],this._mashtab=1,this.dragObject=t,this.content=new PIXI.Container,t.content.addChild(this.content);var i=new Position;this._butRot=!0,this.arrCursorLink=['url("resources/cursor/1.png") 8 8, auto','url("resources/cursor/2.png") 8 8, auto','url("resources/cursor/3.png") 8 8, auto','url("resources/cursor/4.png") 8 8, auto'],this.arrCursorLink1=['url("resources/cursor/5.png") 8 8, auto','url("resources/cursor/6.png") 8 8, auto','url("resources/cursor/7.png") 8 8, auto','url("resources/cursor/8.png") 8 8, auto'],this.arrCursorLink2=['url("resources/cursor/9.png") 8 8, auto'];for(var e=0;e<9;e++)this.array[e]=new ButtonDragBlok(this,this.content,e,t.funDown);this.array[4].content.visible=!1,this.array[3].side=1,this.array[5].side=-1;var h,s,n;this.drawBut=function(){this.array[4].x=0,this.array[4].y=0,this.array[0].x=this.array[3].x=this.array[6].x=t._rectangle.x,this.array[1].x=this.array[7].x=t._rectangle.x+t._rectangle.width/2,this.array[2].x=this.array[5].x=this.array[8].x=t._rectangle.x+t._rectangle.width,this.array[0].y=this.array[1].y=this.array[2].y=t._rectangle.y,this.array[3].y=this.array[5].y=t._rectangle.y+t._rectangle.height/2,this.array[6].y=this.array[7].y=this.array[8].y=t._rectangle.y+t._rectangle.height},this.activBat=function(t){for(var i=0;i<9;i++)this.array[i].activ=t==i||t-10==i},this.visiBtn=function(t,i){this.array[t].content.visible=i},this.loadImgForBtnControl=function(t,i,e){this.array[t].setLinks(i,e)};var a=-1;this.updateCursor=function(){for(var t=0;t<9;t++)this.array[t].mashtab=this._mashtab;h=calc.getAngle2(this.array[3].content.toGlobal(i),this.array[5].content.toGlobal(i)),(s=Math.floor(h*calc.RAD2DEG%360))<0&&(s+=360),n=Math.floor(s/22.5),this.drawBut(),a!=n&&(a=n,15==n||0==n||7==n||8==n?(this.array[0].graphics2.defaultCursor=this.array[8].graphics2.defaultCursor=this.arrCursorLink[1],this.array[2].graphics2.defaultCursor=this.array[6].graphics2.defaultCursor=this.arrCursorLink[0],this.array[3].graphics2.defaultCursor=this.array[5].graphics2.defaultCursor=this.arrCursorLink1[2],this.array[1].graphics2.defaultCursor=this.array[7].graphics2.defaultCursor=this.arrCursorLink1[3]):1==n||2==n||9==n||10==n?(this.array[0].graphics2.defaultCursor=this.array[8].graphics2.defaultCursor=this.arrCursorLink[3],this.array[2].graphics2.defaultCursor=this.array[6].graphics2.defaultCursor=this.arrCursorLink[2],this.array[3].graphics2.defaultCursor=this.array[5].graphics2.defaultCursor=this.arrCursorLink1[1],this.array[1].graphics2.defaultCursor=this.array[7].graphics2.defaultCursor=this.arrCursorLink1[0]):3==n||4==n||11==n||12==n?(this.array[0].graphics2.defaultCursor=this.array[8].graphics2.defaultCursor=this.arrCursorLink[0],this.array[2].graphics2.defaultCursor=this.array[6].graphics2.defaultCursor=this.arrCursorLink[1],this.array[3].graphics2.defaultCursor=this.array[5].graphics2.defaultCursor=this.arrCursorLink1[3],this.array[1].graphics2.defaultCursor=this.array[7].graphics2.defaultCursor=this.arrCursorLink1[2]):5!=n&&6!=n&&13!=n&&14!=n||(this.array[0].graphics2.defaultCursor=this.array[8].graphics2.defaultCursor=this.arrCursorLink[2],this.array[2].graphics2.defaultCursor=this.array[6].graphics2.defaultCursor=this.arrCursorLink[3],this.array[3].graphics2.defaultCursor=this.array[5].graphics2.defaultCursor=this.arrCursorLink1[0],this.array[1].graphics2.defaultCursor=this.array[7].graphics2.defaultCursor=this.arrCursorLink1[1]))}}function ButtonDragBlok(t,i,e,h){var s,n=this;function a(t){t.interactive=!0,t.buttonMode=!0,pl102.isMouseEvents&&t.on("mousedown",n.fun),pl102.isTouchEvents&&t.on("touchstart",n.fun)}this.BDA=t,this.fun=h,this.content=new PIXI.Container,i.addChild(this.content),this.contentBtn=new PIXI.Container,this.content.addChild(this.contentBtn),this.button=new PLButton(this.contentBtn,0,0,"",this.fun),this.button.name=e,this.button.width=this.BDA._wh,this.button.height=this.BDA._wh,this._x=0,this._y=0,this._isDubBtn=!1,this.name=e,this.side=0,this._activ=!1,this._mashtab=1,this.graphics=new PIXI.Graphics,this.graphics2=new PIXI.Graphics,this.contentG=new PIXI.Container,this.content.addChild(this.contentG),this.contentG.addChild(this.graphics),this.contentG.addChild(this.graphics2),this.graphics.defaultCursor=this.BDA.arrCursorLink2[0],this.graphics.name=e+10,this.graphics2.defaultCursor=this.BDA.arrCursorLink[0],this.graphics2.name=e,a(this.graphics),a(this.graphics2),this.button1=null,this.setLinks=function(t,i){null===this.button1&&(this.button1=new PLButton(this.contentBtn,0,0,"",this.fun),this.button1.name=e,this.button1.visible=!1),t&&(this.button1.panel.link=t),i&&(this.button1.panel1.link=i)},this.mouseOut=function(t){!0!==n._activ&&(!0===n._isDubBtn?n.button1.activ=!1:n.button.activ=!1)},this.mouseOver=function(t){!0===n._isDubBtn?n.button1.activ=!0:n.button.activ=!0},this.contentG.interactive=!0,pl102.isMouseEvents&&(this.contentG.on("mouseout",this.mouseOut),this.contentG.on("mouseover",this.mouseOver)),this.draw=function(){var t=Math.min(this.BDA._wh/this.BDA._mashtab,20);if(this.graphics.clear(),this.graphics2.clear(),this.graphics.beginFill(0,0),this.graphics2.beginFill(16711680,0),"norm-width"==this.BDA._normDrag){var i=this.side*this.button.width/2;s=Math.min(this.BDA.dragObject._rectangle.width,this.BDA.dragObject._rectangle.height)/2,this.button.width=Math.min(t,s),this.button.height=this.BDA.dragObject._rectangle.height,this.button.position.set(-this.button.width/2+i,-this.button.height/2),null!==this.button1&&(this.button1.width=Math.min(t,s),this.button1.height=this.BDA.dragObject._rectangle.height,this.button1.position.set(-this.button.width/2+i,-this.button.height/2));var e=10/this.BDA._mashtab;return this.graphics2.drawRect(this.button.x-(1===this.side?e:0),this.button.y-e,this.button.width+e,this.button.height+2*e),void(this.isDubBtn=!0)}this.isDubBtn=!1,this.button.width=this.button.height=t,this.button.position.set(-this.button.width/2,-this.button.height/2),s=Math.min(this.BDA.dragObject._rectangle.width,this.BDA.dragObject._rectangle.height)/4;var h=Math.min(3*t,s);this.graphics.drawCircle(0,0,h),this.graphics2.drawCircle(0,0,.45*h)},this.draw()}function TestPLDragObject(cont,x,y){PIXI.Container.call(this),cont.addChild(this),this.x=x||0,this.y=y||0;var pXDragObject=new PLDragObject;pXDragObject.parent=cont;var panel=new PLWindow(this,0,0,"TestPLDragObject");panel.hasMinimizeButton=!0,panel.width=150;var arrSlid=[],i=1,x=5;arrSlid[0]=new PLSliderBig(panel.content,x,2,"wh",fromName),arrSlid[1]=new PLSliderBig(panel.content,x,27*i++,"wh2",fromName),arrSlid[6]=new PLSliderBig(panel.content,x,27*i++,"minDrag",fromName);var btn=new PLButton(panel.content,x,27*i++,"normDrag.norm",fromName1);btn.width=panel.width-2*x,btn._title="normDrag",btn.value="'norm'";var btn=new PLButton(panel.content,x,27*i++,"normDrag.null",fromName1);btn.width=panel.width-2*x,btn.value="'null'",btn._title="normDrag";var btn=new PLButton(panel.content,x,27*i++,"normDrag.norm-width",fromName1);btn.width=panel.width-2*x,btn.value="'norm-width'",btn._title="normDrag";var btn=new PLButton(panel.content,x,27*i++,"normDrag.default",fromName1);btn.width=panel.width-2*x,btn.value="'default'",btn._title="normDrag";var btn=new PLButton(panel.content,x,27*i++,"butRot.false",fromName1);btn.width=panel.width-2*x,btn.value=!1,btn._title="butRot";var btn=new PLButton(panel.content,x,27*i++,"butRot.true",fromName1);btn.width=panel.width-2*x,btn.value=!0,btn._title="butRot";var btn=new PLButton(panel.content,x,27*i++,"uniformScaling.false",fromName1);btn.width=panel.width-2*x,btn.value=!1,btn._title="uniformScaling";var btn=new PLButton(panel.content,x,27*i++,"uniformScaling.true",fromName1);btn.width=panel.width-2*x,btn.value=!0,btn._title="uniformScaling";var btn=new PLButton(panel.content,x,27*i++,"oppositeCenter.false",fromName1);btn.width=panel.width-2*x,btn.value=!1,btn._title="oppositeCenter";var btn=new PLButton(panel.content,x,27*i++,"oppositeCenter.true",fromName1);btn.width=panel.width-2*x,btn.value=!0,btn._title="oppositeCenter";var btn=new PLButton(panel.content,x,27*i++,"upBtnRot.false",fromName1);btn.width=panel.width-2*x,btn.value=!1,btn._title="upBtnRot";var btn=new PLButton(panel.content,x,27*i++,"upBtnRot.true",fromName1);function fromName(){for(var arrName=this._title.split("."),comand="pXDragObject",i=0;i<arrName.length;i++)comand+="['"+arrName[i]+"']";comand+="="+this.value,eval(comand)}function fromName1(){for(var str=this._title,arrName=str.split("."),comand="pXDragObject",i=0;i<arrName.length;i++)comand+="."+arrName[i];comand+="="+this.value,eval(comand)}btn.width=panel.width-2*x,btn.value=!0,btn._title="upBtnRot",arrSlid.forEach(function(t){t.width=panel.width-2*x}),panel.height=27*i++}function DistanceRotation(t,i){var e=this;this.type="DistanceRotation",this.fun=i,this.content=new PIXI.Container,t.addChild(this.content),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this._mashtab=1,this._activ=!1,this.content.visible=this._activ,this.angel=0,this.color=pl102.color1,this.lineTricknes=1,this.btnWH=20,this._distBtn=80,this.distMoveBtn=0,this.btn=new PLButton(this.content,0,0,"",function(){l=!0,pl102.interaction.isNotChangeCursorMouseOverOut=!0,s=e.content.toLocal(pl102.global),h.x=e.btn.position.x,h.y=e.btn.position.y,pl102.stage.off("mousemove",u),pl102.stage.off("mouseup",d),pl102.stage.on("mousemove",u),pl102.stage.on("mouseup",d),e.funDown&&e.funDown()}),this.btn.width=this.btnWH,this.btn.height=this.btnWH,this.btn.funOver=function(){this.activ=!0,this.graphInter.defaultCursor='url("resources/cursor/9.png") 8 8, auto'},this.btn.funOut=function(){this.activ=l,this.graphInter.defaultCursor="default"};var h=new PIXI.Point,s=new PIXI.Point,n=new PIXI.Point,a=new PIXI.Point,o=new PIXI.Point,r=new PIXI.Point,c=90*calc.DEG2RAD,l=!1;function u(t){var i=pl102.global;t instanceof MouseEvent&&i.set(t.clientX,t.clientY),n=e.content.toLocal(i),a.set(n.x-s.x,n.y-s.y),r.x=h.x+a.x,r.y=h.y+a.y,e.btn.position.set(r.x,r.y),e.drawLine(),e.angel=calc.getAngle(e.pointCenter,e.btn.position)+c,e.distMoveBtn=calc.getDistance(e.pointCenter,r),e.btn.rotation=e.angel,e.fun&&e.fun()}function d(){l=!1,e.distMoveBtn=0,e.btn.funOut(),pl102.interaction.isNotChangeCursorMouseOverOut=!1,pl102.stage.off("mousemove",u),pl102.stage.off("mouseup",d),e.fun&&e.fun(),e.funUp&&e.funUp()}this.pointCenter=new PIXI.Point,this.draw=function(t){if(t=t||this.rectangle,this.rectangle=t,this._activ&&t){this.angel=t.angel,this.pointCenter.set(t.p.x+t.width/2,t.p.y+t.height/2),calc.rotationPoint(this.pointCenter,this.angel,t.p);var i=e.distMoveBtn||t.height/2+this.distBtn;o.set(this.pointCenter.x,this.pointCenter.y-i),calc.rotationPoint(o,this.angel,this.pointCenter),this.btn.position.set(o.x,o.y),this.btn.rotation=this.angel,this.updateBtnFromMashtab(),this.drawLine()}},this.drawLine=function(){var t=this.lineTricknes/this._mashtab;this.graphics.clear(),this.graphics.lineStyle(t,this.color,1),this.graphics.moveTo(this.pointCenter.x,this.pointCenter.y),this.graphics.lineTo(this.btn.position.x,this.btn.position.y),this.graphics.endFill()},this.updateBtnFromMashtab=function(){var t=Math.min(this.btnWH/this._mashtab,20);this.btn.width=t,this.btn.height=t,this.btn.pivot.set(this.btn.width/2,this.btn.height/2)},this.setLinks=function(t,i){t&&(this.btn.panel.link=t),i&&(this.btn.panel1.link=i)}}function DistanceRotationCircle(t,i){var e=this;this.type="DistanceRotationCircle",this.fun=i,this.content=new PIXI.Container,t.addChild(this.content),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this._mashtab=1,this._activ=!1,this.content.visible=this._activ,this.wh=30,this.angel=0,this.color=pl102.color1,this.lineTricknes=1,this.btnWH=20,this._distBtn=80,this.distMoveBtn=0,this.btn=new PLArrButtonIcon(this.content),this.btn.mashtab=this._mashtab,this.btn.plusIcon("name",void 0,this.wh);var h=new PIXI.Point,s=new PIXI.Point,n=new PIXI.Point,a=new PIXI.Point,o=new PIXI.Point,r=new PIXI.Point,c=90*calc.DEG2RAD;this.btn.funDown=function(){!0,pl102.interaction.isNotChangeCursorMouseOverOut=!0,s=e.content.toLocal(pl102.global),h.x=e.btn.position.x,h.y=e.btn.position.y,canDofunMove=!0,canDofunUp=!0,e.funDown&&e.funDown()},this.btn.funMove=function(t){if(!1!==canDofunMove){this.color=16757248;var i=pl102.global;t instanceof MouseEvent&&i.set(t.clientX,t.clientY),n=e.content.toLocal(i),a.set(n.x-s.x,n.y-s.y),r.x=h.x+a.x,r.y=h.y+a.y,e.btn.position.set(r.x,r.y),e.drawLine(),e.angel=calc.getAngle(e.pointCenter,e.btn.position)+c,e.distMoveBtn=calc.getDistance(e.pointCenter,r),e.btn.rotation=e.angel,e.fun&&e.fun()}},this.btn.funUp=function(){!1!==canDofunUp&&(this.color=pl102.color11,!1,e.distMoveBtn=0,pl102.interaction.isNotChangeCursorMouseOverOut=!1,canDofunMove=!1,canDofunUp=!1,e.fun&&e.fun(),e.funUp&&e.funUp())},this.pointCenter=new PIXI.Point,this.draw=function(t){if(t=t||this.rectangle,this.rectangle=t,this._activ&&t){this.angel=t.angel,this.pointCenter.set(t.p.x+t.width/2,t.p.y+t.height/2),calc.rotationPoint(this.pointCenter,this.angel,t.p);var i=e.distMoveBtn||t.height/2+this.distBtn;o.set(this.pointCenter.x,this.pointCenter.y-i),calc.rotationPoint(o,this.angel,this.pointCenter),this.btn.position.set(o.x,o.y),this.btn.rotation=this.angel,this.updateBtnFromMashtab(),this.drawLine()}},this.drawLine=function(){var t=this.lineTricknes/this._mashtab;this.graphics.clear(),this.graphics.lineStyle(t,this.color,1),this.graphics.moveTo(this.pointCenter.x,this.pointCenter.y),this.graphics.lineTo(this.btn.position.x,this.btn.position.y),this.graphics.endFill()},this.updateBtnFromMashtab=function(){this.btn.mashtab=this._mashtab},this.setLinks=function(t){this.btn.link=t}}function PLArrButtonIcon(t){PIXI.Container.call(this),this.type="PLArrButtonIcon";var i=this;this.pLClikArrButton=t,t.addChild(this),this._activ=!1,this._activDraw=!1,this.content=new PIXI.Container,this.addChild(this.content),this._mashtab=1,this._radiusBut=this.pLClikArrButton._radiusBut||20,this._distansBut=this.pLClikArrButton._distansBut||100,this._angelBut=this.pLClikArrButton._angelBut||20,this._color1=this.pLClikArrButton._color1||"#eff3f4",this._color2=this.pLClikArrButton._color2||"#64b26d",this._angel=0,this._link,this._link2,this.pointAngel=new PIXI.Point(200*Math.random()-100,200*Math.random()-100),this.time=500,this.name="null",this.typeSob="null",this._prossent=0,this.tween=new TWEEN.Tween(this),this.tweenPosit=new TWEEN.Tween(this),this.tweenScale=new TWEEN.Tween(this.content.scale),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this.rect,this.timeT=0,this._color=pl102.color11,this.scBool=!1,this._tip=0,this.tipPosit=0,this.cursor="default",this.mousePoint=new PIXI.Point(0,0),this.downPoint=new PIXI.Point(0,0),this.dataEvent={x:0,y:0,angel:0,distance:0},this.visi=!0,this.na=!1,this.sahAnim=!1,this.dragX=0,this.dragY=0,this.sahIt=0,this._texture,i._w=0,i._h=0,this._sprite,this.funDown=null,this.funMove=null,this.funUp=null,this.plusIcon=function(t,i){this.name=t,this.content.addChild(this.graphics),this.link=i},this.posleLink=function(){pLbigBaza.getTexture(this._link,function(t){i._w=t.image.width,i._h=t.image.height,setTimeout(function(){i.start()},1),i.texture=t.texture})},this.plusIcon2=function(t,e){null!=e&&(this.link2=e,this.name=t,this.content.addChild(this.graphics),pLbigBaza.getTexture(e,function(t){i._w=t.image.width,i._h=t.image.height,setTimeout(function(){i.start()},1),i.texture=t.texture}))},this.start=function(){if(null!=this._sprite&&this._sprite.destroy(),this._sprite=new PIXI.Sprite(this.texture),this.addChild(this._sprite),this._sprite.x=-i._w/2,this._sprite.y=-i._h/2,this.tweenSprite=new TWEEN.Tween(this._sprite),1==this.scBool){var t=4*this._radiusBut/3;this._sprite.x=-t/2,this._sprite.y=-t/2,this._sprite.scale.x=t/i._w,this._sprite.scale.y=t/i._h}},this.refresh=function(){};this.graphMask=new PIXI.Graphics,this.addChild(this.graphMask),this.graphicsFon=new PIXI.Graphics,this.addChild(this.graphicsFon),this.drawButton=function(){this.graphics.clear(),this.graphics.beginFill(this._color),this.graphics.drawCircle(0,0,this._radiusBut),null==this.image&&(this.image=new PLImage(this.graphics,-this._radiusBut,-this._radiusBut,pl102.base),this.image.height=2*this._radiusBut,this.image.width=2*this._radiusBut),this.graphMask.clear(),this.graphMask.beginFill(),this.graphMask.drawCircle(0,0,this._radiusBut),this.image.mask=this.graphMask,this.graphicsFon.clear(),this.graphicsFon.lineStyle(1,pl102.color1),this.graphicsFon.beginFill(16777215,0),this.graphicsFon.drawCircle(0,0,this._radiusBut),this.graphicsFon.alpha=0},this.drawButton(),this.mouseOver=function(t){this._sprite&&(this._sprite.alpha=.5,this.tweenSprite.to({alpha:1},this.time).start(),this.graphicsFon.alpha=1)},this.mouseOut=function(t){this.graphicsFon.alpha=0},this.mouseDown=function(t){0===t.data.originalEvent.button&&(i.downPoint=new PIXI.Point(i.x,i.y),i.mousePoint.x=pl102.global.x,i.mousePoint.y=pl102.global.y,i.dataEvent.x=0,i.dataEvent.y=0,i.dataEvent.angel=0,i.dataEvent.distance=0,i.typeSob="mouseDown",pl102.isMouseEvents&&(pl102.stage.on("mousemove",i.stageMove),window.addEventListener("mouseup",i.stageUp)),pl102.isTouchEvents&&(pl102.stage.on("touchmove",i.stageMove),window.addEventListener("touchend",i.stageUp)),this.pLClikArrButton.peredast&&this.pLClikArrButton.peredast(i),i.funDown&&i.funDown())},this.stageUp=function(t){pl102.isMouseEvents&&(window.removeEventListener("mouseup",i.stageUp),pl102.stage.off("mousemove",i.stageMove)),pl102.isTouchEvents&&(window.removeEventListener("touchend",i.stageUp),pl102.stage.off("touchmove",i.stageMove)),i.typeSob="mouseUp",i.x=i.downPoint.x,i.y=i.downPoint.y,i.pLClikArrButton.peredast&&i.pLClikArrButton.peredast(i,!0),i.funUp&&i.funUp()},this.stageMove=function(t){i.dragX=pl102.global.x-i.mousePoint.x,i.dragY=pl102.global.y-i.mousePoint.y,i.typeSob="stageMove",1===i._tip&&(i.y=i.downPoint.y+i.dragY,i.x=i.downPoint.x+i.dragX,i.dataEvent.x=i.x-i.pointAngel.x,i.dataEvent.y=i.y-i.pointAngel.y,i.dataEvent.angel=180*Math.atan2(i.y-i.pointAngel.y,i.x-i.pointAngel.x)/Math.PI,i.dataEvent.distance=Math.sqrt(Math.pow(i.pointAngel.x-i.x,2)+Math.pow(i.pointAngel.y-i.y,2)),i.pLClikArrButton.peredast(i)),2===i._tip&&(i.y=i.downPoint.y+i.dragY,i.dataEvent.y=i.y-i.pointAngel.y,i.dataEvent.angel=180*Math.atan2(i.y-i.pointAngel.y,i.x-i.pointAngel.x)/Math.PI,i.dataEvent.distance=Math.sqrt(Math.pow(i.pointAngel.x-i.x,2)+Math.pow(i.pointAngel.y-i.y,2)),i.pLClikArrButton.peredast(i)),3===i._tip&&(i.x=i.downPoint.x+i.dragX,i.dataEvent.x=i.x-i.pointAngel.x,i.dataEvent.angel=180*Math.atan2(0-i.y,0-i.x)/Math.PI,i.dataEvent.distance=Math.sqrt(Math.pow(i.x-0,2)+Math.pow(i.y-0,2)),i.pLClikArrButton.peredast(i)),i.funMove&&i.funMove()},this.getAngelBatton=function(){return 180*Math.atan2(-i.y,-i.x)/Math.PI},this.interactive=!0,this.buttonMode=!0,pl102.isMouseEvents&&(this.on("mousedown",this.mouseDown),this.on("mouseover",this.mouseOver),this.on("mouseout",this.mouseOut)),pl102.isTouchEvents&&this.on("touchstart",this.mouseDown),this.activBustro=function(t){this._activ!=t&&(this._activ=t,this.sahAnim=!1,0==this._activ?(this.x=0,this.y=0,this.content.scale.x=0,this.content.scale.y=0):(this.x=this.pointAngel.x/this._mashtab,this.y=this.pointAngel.y/this._mashtab,this.content.scale.x=1,this.content.scale.y=1))},this.getVector=function(t,i){i=i*Math.PI/180;var e=Math.abs(t)*Math.cos(i),h=Math.abs(t)*Math.sin(i);return new PIXI.Point(e,h)}}__webpack_require__.d(__webpack_exports__,"a",function(){return PLDragObject}),PLDragObject.prototype={set minDrag(t){this._minDrag=t,this.minDragH=t,this.minDragW=t,this.scaleDebag=1},get minDrag(){return this._minDrag},set mashtab(t){this._mashtab!=t&&(this._mashtab=t,null!=this._parent&&(this.buttonDragAll.mashtab=t,this.distanceRotation.mashtab=t,this.drawGraph102()))},get mashtab(){return this._mashtab},set parent(t){null==t&&null==this._parent||(null==t&&null!=this._parent&&(1==this.debug&&this._parent.removeChild(this.graphics2),this._parent.removeChild(this.content1)),this._parent=t,null!=t&&(t.addChild(this.content1),1==this.debug&&t.addChild(this.graphics2),this.positAbcolut(),this.buttonDragAll.mashtab=this._mashtab,this.distanceRotation.mashtab=this._mashtab),this.draw102())},get parent(){return this._parent},set rectangle(t){this._rectangle.x=t.x,this._rectangle.y=t.y,this._rectangle.width=t.width,this._rectangle.height=t.height,this._rectangle.p.x=t.p.x,this._rectangle.p.y=t.p.y,this._rectangle.angel=t.angel,this._scaleRect=1,this.bw=this.rectangle.width,this.bh=this.rectangle.height,this.bx=this.rectangle.x,this.by=this.rectangle.y,this.uniformScaling&&(this.aspectRatio=this.bw/this.bh),this.draw102(),this.positAbcolut()},get rectangle(){return this._rectangle},set boolKrai(t){this._boolKrai=t},get boolKrai(){return this._boolKrai},set scaleRect(t){this._scaleRect!=t&&(this._scaleRect=t,this._rectangle.x=this.bx*t,this._rectangle.width=this.bw*t,this._rectangle.y=this.by*t,this._rectangle.height=this.bh*t,this.draw102())},get scaleRect(){return this._scaleRect},set angel(t){this._angel=t,this.rectangle.angel=this._angel,this.draw102()},get angel(){return this._angel},set normDrag(t){this._normDrag!=t&&(this._normDrag=t,this.buttonDragAll.normDrag=t,this.butRot=this.butRot,this.mashtab=this._mashtab,this.draw102())},get normDrag(){return this._normDrag},set butRot(t){this._butRot=t,this.buttonDragAll.butRot=t},get butRot(){return this._butRot},set widthNot(t){this._widthNot=t},get widthNot(){return this._widthNot},set heightNot(t){this._heightNot=t},get heightNot(){return this._heightNot},set interactive(t){this._interactive=t,this.contentM.interactive=t,this.contentM.visible=t},get interactive(){return this.contentM.interactive},set boolFont(t){this._boolFont!=t&&(this._boolFont=t,this.draw102())},get boolFont(){return this._boolFont},set wh2(t){this._wh2!=t&&(this._wh2=t,this.drawBut())},get wh2(){return this._wh2},set wh(t){this._wh!=t&&(this._wh=t,this.drawBut())},get wh(){return this._wh},set uniformScaling(t){this._uniformScaling!=t&&(this._uniformScaling=t)},get uniformScaling(){return this._uniformScaling},set oppositeCenter(t){this._oppositeCenter!=t&&(this._oppositeCenter=t)},get oppositeCenter(){return this._oppositeCenter},set upBtnRot(t){this._upBtnRot=t,this.buttonDragAll.upBtnRot=t},get upBtnRot(){return this._upBtnRot},set otstupKrai(t){this._otstupKrai!=t&&(this._otstupKrai=t,this.draw102())},get otstupKrai(){return this._otstupKrai},set distRot(t){this._distRot!=t&&(this._distRot=t,this.distanceRotation.activ=this._distRot)},get distRot(){return this._distRot}},ButtonDragAll.prototype={set mashtab(t){if(this._mashtab!=t){this._mashtab=t;for(var i=0;i<9;i++)this.array[i].mashtab=this._mashtab}},get mashtab(){return this._mashtab},set normDrag(t){if(this._normDrag!=t){this._normDrag=t;for(var i=0;i<9;i++)this.visiBtn(i,!1);switch(t){case"norm":this.visiBtn(0,!0),this.visiBtn(2,!0),this.visiBtn(6,!0),this.visiBtn(8,!0);break;case"null":break;case"norm-width":this.visiBtn(3,!0),this.visiBtn(5,!0);break;case"norm-w-h-leftCorner":this.visiBtn(1,!0),this.visiBtn(3,!0),this.visiBtn(5,!0),this.visiBtn(6,!0),this.visiBtn(7,!0);break;default:for(i=0;i<9;i++)this.visiBtn(i,!0);this.visiBtn(4,!1)}var e=this._mashtab;this._mashtab=88,this.mashtab=e}},get normDrag(){return this._normDrag},set butRot(t){if(this._butRot!=t){this._butRot=t;for(var i=0;i<9;i++)this.array[i].graphics.visible=t}},get butRot(){return this._butRot},set upBtnRot(t){if(this._upBtnRot!=t){this._upBtnRot=t;for(var i=0;i<9;i++)this.array[i].graphics2.visible=!t}},get upBtnRot(){return this._upBtnRot}},ButtonDragBlok.prototype={set activ(t){this._activ!=t&&(this._activ=t,this.button.activ=t)},get activ(){return this._activ},set x(t){this._x=t,this.content.x=t},get x(){return this._x},set y(t){this._y=t,this.content.y=t},get y(){return this._y},set mashtab(t){null!=t&&(this._mashtab=t,this.draw())},get mashtab(){return this._mashtab},set isDubBtn(t){null!==this.button1&&this._isDubBtn!==t&&(this._isDubBtn=t,this.button.visible=!this._isDubBtn,this.button1.visible=this._isDubBtn)},get isDubBtn(){return this._isDubBtn}},TestPLDragObject.prototype=Object.create(PIXI.Container.prototype),TestPLDragObject.prototype.constructor=TestPLDragObject,DistanceRotation.prototype={set distBtn(t){this._distBtn!==t&&(this._distBtn=t,this.draw())},get distBtn(){return this._distBtn},set activ(t){this._activ!==t&&(this._activ=t,this.content.visible=this._activ)},get activ(){return this._activ},set mashtab(t){this._mashtab!==t&&(this._mashtab=t,this.updateBtnFromMashtab(),this.drawLine())},get mashtab(){return this._mashtab}},DistanceRotationCircle.prototype={set distBtn(t){this._distBtn!==t&&(this._distBtn=t,this.draw())},get distBtn(){return this._distBtn},set activ(t){this._activ!==t&&(this._activ=t,this.content.visible=this._activ)},get activ(){return this._activ},set mashtab(t){this._mashtab!==t&&(this._mashtab=t,this.updateBtnFromMashtab(),this.drawLine())},get mashtab(){return this._mashtab}},PLArrButtonIcon.prototype=Object.create(PIXI.Container.prototype),PLArrButtonIcon.prototype.constructor=PLArrButtonIcon,Object.defineProperties(PLArrButtonIcon.prototype,{color:{set:function(t){this._color!=t&&(this._color=t,this.drawButton())},get:function(){return this._color}},iconNum:{set:function(t){this._iconNum!=t&&(this._iconNum=t,1==t&&this.plusIcon(this.name,this._link),0==t&&this.plusIcon2(this.name,this._link2))},get:function(){return this._iconNum}},texture:{set:function(t){this._texture!=t&&(this._texture=t)},get:function(){return this._texture}},link:{set:function(t){this._link!=t&&(this._link=t,this.posleLink())},get:function(){return this._link}},link2:{set:function(t){this._link2!=t&&(this._link2=t)},get:function(){return this._link2}},mashtab:{set:function(t){this._mashtab=t,this.scale.x=this.scale.y=1/t},get:function(){return this._mashtab}},prossent:{set:function(t){this._prossent=t,this.drawButton(this._prossent)},get:function(){return this._prossent}},activ:{set:function(t){this._activ!=t&&(this._activ=t,this.sahIt++,this.tweenPosit.stop(),this.tweenScale.stop(),this.x=0,this.y=0,this.content.scale.x=0,this.content.scale.y=0,0==this._activ?self.sahAnim=!1:(self.sahAnim=!1,this.x=this.pointAngel.x/this._mashtab,this.y=this.pointAngel.y/this._mashtab,this.content.scale.x=1,this.content.scale.y=1,this.pLClikArrButton.visible=!0))},get:function(){return this._activ}},angel:{set:function(t){this._angel=t,this.pointAngel=this.getVector(this._distansBut,t)},get:function(){return this._angel}},tip:{set:function(t){switch(this._tip=parseInt(t),this._tip){case 1:this.cursor="move";break;case 2:this.cursor="n-resize";break;default:this.cursor="default"}},get:function(){return this._tip}}})},function(t,i,e){"use strict";function h(){var t=this;this.type="PdfEditorConvert",this.doc=null,this.numPages=0,this.arrPage=[],this.file=null,this.linkPdfLib="lib/pdfjs/pdf.js",this.linkPdfWorkLib="lib/pdfjs/pdf.worker.js";var i=!1,e=0,h=null;function s(){2===++e&&(i=!0,t.startPDF(t.file))}this.init=function(){e=0,(h=document.createElement("script")).onload=s,h.src=this.linkPdfLib,document.head.appendChild(h),(h=document.createElement("script")).onload=s,h.src=this.linkPdfWorkLib,document.head.appendChild(h)},this.startPDF=function(e){this.file=e,!1!==i?(this.doc=null,this.arrPage=[],PDFJS.getDocument(e).then(function(i){t.doc=i,t.numPages=i.numPages,t.dispatchEvent(new B("loadFile",{name:"loadFile",pages:t.numPages}))},function(i){t.dispatchEvent(new B("loadFileError",{}))})):this.init()};var n=1,a=[];this.getPicInPage=function(i,e,h){var s=function(){for(var t=0;t<a.length;t++)if(!1===a[t].activ)return a[t];return a.push(document.createElement("canvas")),a[a.length-1]}();s.activ=!0;var o=s.getContext("2d"),r={};r.width=2*i.view[2],r.height=2*i.view[3],n=i.getViewport(3),s.width=n.width,s.height=n.height,i.render({canvasContext:o,viewport:n}).promise.then(function(i){t.dispatchEvent(new B("loadPage",{name:"loadPage",image:s.toDataURL(),rect:r})),s.activ=!1},function(i){t.dispatchEvent(new B("loadPageError",{})),s.activ=!1})},this.getPic=function(i,e){void 0===this.arrPage[i]?this.doc.getPage(i).then(function(h){t.arrPage[i]=h,t.getPicInPage(h,e)},function(i){t.dispatchEvent(new B("loadPageError",{}))}):this.getPicInPage(this.arrPage[i],e)}}function s(){var t=this;window.screenshootContainer=this;var i=new PIXI.autoDetectRenderer(100,100,{antialias:!0,transparent:!0}),e=new PIXI.Container,h={width:256,height:256},s=(new PIXI.Graphics,new PIXI.Graphics);e.addChild(s);var n=new PIXI.Point(1,1),a=new PIXI.Rectangle,o=new PIXI.Point,r=document.createElement("canvas"),c=r.getContext("2d");this.imageSize={width:64,height:64},this.rectToPrint={x:0,y:0,width:64,height:64},this.getImAd=function(t,i,e,s){var n=s||"image/png",a=main.renderer,o=a.resolution;a.resolution=1,h.width=a.width,h.height=a.height,a.resize(Math.round(i),Math.round(e)),a.render(t);var r=a.view.toDataURL(n,1);return a.resize(h.width,h.height),a.resolution=o,r},this.getImageRect=function(i,h,s,n,a){mimeType=n||"image/png";var o=this.getStateCont(i);this.moveContToRect(i,h,s),this.updateBackground(h,a),e.addChild(i);var r=t.getImAd(e,h.width,h.height,mimeType);return t.setStateCont(i,o),r};this.getBigSizeImage=function(t,i,h){var s=0,l=0;e.addChild(t);var u=main.renderer,d=this.getStateCont(t),g=this.getStateRender(u);u.resolution=1,n.x=Math.floor(i.width/1e3),n.y=Math.floor(i.height/1e3),n.x<1&&(n.x=1),n.y<1&&(n.y=1),this.updateBackground(i,16777215),a.width=i.width/n.x,a.height=i.height/n.y,c.clearRect(0,0,r.width,r.height),r.width=i.width,r.height=i.height,u.resize(Math.round(a.width),Math.round(a.height));for(var p=0;p<n.x*n.y;p++)o.x=s*a.width,o.y=l*a.height,this.moveContToRect(t,i,h),u.render(e),c.drawImage(u.view,o.x,o.y,u.width,u.height),++s===n.x&&(s=0,l++);return this.setStateCont(t,d),this.setStateRender(u,g),r.toDataURL("image/jpeg")},this.getStateRender=function(t){var i={};return i.resolution=t.resolution,i.width=t.width,i.height=t.height,i},this.setStateRender=function(t){i.resize(t.width,t.height),i.resolution=t.resolution},this.moveContToRect=function(t,i,e){var h=Math.min(i.width/e.width,i.height/e.height);t.position.set(-e.x*h-o.x,-e.y*h-o.y),t.scale.set(h,h)},this.updateBackground=function(t,i){s.clear(),i&&(s.beginFill(i,1),s.drawRect(0,0,t.width,t.height))},this.getStateCont=function(t){var i={position:new Position(t.position.x,t.position.y),scale:new Position(t.scale.x,t.scale.y)};return t.parent&&(i.parent=t.parent,i.indexChildren=t.parent.getChildIndex(t)),i},this.setStateCont=function(t,i){t.position.set(i.position.x,i.position.y),t.scale.set(i.scale.x,i.scale.y),i.parent&&i.parent.addChildAt(t,i.indexChildren)}}function n(t){PIXI.Container.call(this);var i=this;this.otstup=2,this.content2d=new PIXI.Container,this.addChild(this.content2d);var e=t;this.w=new PLWindow(this.content2d,0,0,"DebugMenuScreenshootContainer"),this.w.width=200,this.w.hasMinimizeButton=!0,this.w.minimize=!0,this.contentSlid=new PIXI.Container,this.w.content.addChild(this.contentSlid);var h={width:"width",height:"height",widthRect:"widthRect",heightRect:"heightRect",xRect:"xRect",yRect:"yRect",screenshoot:"screenshoot",imgScale:"imgScale",panel:"panel"};for(var s in this.image=new PLImage(this.w.content,220,0),this.arrSlid=[],this.arrSlid[h.width]=new PLSliderBig(this.contentSlid,0,0,"width",r,1,5e3),this.arrSlid[h.height]=new PLSliderBig(this.contentSlid,0,0,"height",r,1,5e3),this.arrSlid[h.panel]=new PLPanel(this.contentSlid,0,0,"--"),this.arrSlid[h.xRect]=new PLSliderBig(this.contentSlid,0,0,"xRect",r,-1500,1500),this.arrSlid[h.yRect]=new PLSliderBig(this.contentSlid,0,0,"yRect",r,-1500,1500),this.arrSlid[h.widthRect]=new PLSliderBig(this.contentSlid,0,0,"widthRect",r,1,1500),this.arrSlid[h.heightRect]=new PLSliderBig(this.contentSlid,0,0,"heightRect",r,1,1500),this.arrSlid[h.imgScale]=new PLSliderBig(this.contentSlid,0,0,"imgScale",r,.01,5),this.arrSlid[h.screenshoot]=new PLButton(this.contentSlid,0,0,"screenshoot",r),this.arrSlid[h.imgScale].okrug=100,this.arrSlid)this.arrSlid[s].width=this.w.width-2*this.otstup,this.arrSlid[s].idName=s;var n={x:0,y:0,width:128,height:128},a={width:128,height:128};this.rectToPrint=n,this.imageSize=a;var o=null;function r(){this.idName===h.imgScale&&i.image.scale.set(this.value,this.value),this.idName===h.width&&(a.width=this.value),this.idName===h.height&&(a.height=this.value),this.idName===h.xRect&&(n.x=this.value),this.idName===h.yRect&&(n.y=this.value),this.idName===h.widthRect&&(n.width=this.value),this.idName===h.heightRect&&(n.height=this.value),clearTimeout(o),o=setTimeout(function(){var t=e.getImageRect(main.stage,a,n,"image/jpeg");i.image.width=a.width,i.image.height=a.height,i.image.link=t,this.idName===h.screenshoot&&(i.image.link=t),i.emit("updateImage",t)},1e3)}this.reposition=function(){var t=this.otstup,i=this.otstup;for(var e in this.arrSlid){this.arrSlid[e].position.set(t,i);var h=this.arrSlid[e].height;"PLSliderBig"==this.arrSlid[e].type?h+=18:"PLColor"==this.arrSlid[e].type&&(h+=4),i+=this.otstup+h}this.w.height=i},this.reposition()}e.r(i),h.prototype=Object.assign(h.prototype,EventDispatcher.prototype),n.prototype=Object.create(PIXI.Container.prototype),n.prototype.constructor=n;var a=e(0);function o(t){PIXI.Container.call(this);var i=this;function e(){i.sellectedBtn=this,i.updatePxdFromObj(this),i.pxd.parent=i,i.pxd.funDown(),i.addChild(this)}this.type="PdfEditorSketchRooms",t.addChild(this),this.btnCreateCont=new PIXI.Container,this._otstup=2,this._width=100,this._height=100,this._mashtab=1,this._activ=!1,this._activBtnClose=!0,this._sellectedBtn=null,this.arrBtn=[],this.createBtn=function(t){if(t){for(var h=0,s=0,n=null,a=0;a<this.arrBtn.length;a++)if(!1===this.arrBtn[a].visible){(n=this.arrBtn[a]).visible=!0;break}null===n&&((n=new r(this,h,s,"",e)).boolKontur=!0,n.idGall=t.id,n.panel.nizAlpha=.25,n.panel.nizNum=30,n.color=15790320,n.idArr=i.arrBtn.length,i.arrBtn.push(n)),n.text=t.text;var o=n.label.getLocalBounds();if(width=o.width+4*this._otstup,height=o.height+2*this._otstup,!0===t.isOut){var c=this.toLocal(pl102.global);h=c.x-width/2,s=c.y-height/2}else h=(this._width/2-width/2)/this._mashtab,s=(this._height/2-height/2)/this._mashtab;return n.width=width,n.height=height,n.x=h,n.y=s,n}},this.clear=function(){for(var t=0;t<this.arrBtn.length;t++)this.arrBtn[t].visible=!1},this.updateObjFromPxd=function(t){t.x=i.pxd.rectangle.x+i.pxd.rectangle.p.x,t.y=i.pxd.rectangle.y+i.pxd.rectangle.p.y},this.updatePxdFromObj=function(t){i.pxd._rectangle.width=t.width,i.pxd._rectangle.height=t.height,i.pxd._rectangle.x=-t.width/2,i.pxd._rectangle.y=-t.height/2,i.pxd._rectangle.p.x=t.x-i.pxd._rectangle.x,i.pxd._rectangle.p.y=t.y-i.pxd._rectangle.y,i.pxd.funDown()};new PIXI.Point,new PIXI.Rectangle;this.setState=function(t){"createSketchRoom"===t.name&&function(t){i.sellectedBtn=i.createBtn(t),!0===t.isOut&&(i.pxd._rectangle.width=i.sellectedBtn.width,i.pxd._rectangle.height=i.sellectedBtn.height,i.pxd._rectangle.x=-i.sellectedBtn.width/2,i.pxd._rectangle.y=-i.sellectedBtn.height/2,i.pxd._rectangle.p.x=i.sellectedBtn.x-i.pxd._rectangle.x,i.pxd._rectangle.p.y=i.sellectedBtn.y-i.pxd._rectangle.y,i.pxd.parent=i,i.pxd.funDown())}(t)},this.pxd=new a.a(function(){i.sellectedBtn&&(i.updateObjFromPxd(i.sellectedBtn),i.arrBtn[i.sellectedBtn.idArr].x=i.pxd.rectangle.p.x+i.pxd.rectangle.x,i.arrBtn[i.sellectedBtn.idArr].y=i.pxd.rectangle.p.y+i.pxd.rectangle.y)}),this.pxd.funUp=function(){this.parent=void 0},this.pxd.buttonDragAll._normDrag=null,this.pxd.buttonDragAll.normDrag="null",this.pxd.borderRect.x=0,this.pxd.borderRect.y=0,this.draw=function(){}}function r(t,i,e,h,s,n){PLButton.call(this,t,i,e,h,s,n);var a=this;this.type="SketchRoomsBtn",this.otstup=6,this.onDownClose=function(){a.visible=!1},this.closeBtn=new PLButton(this,0,0,"x",this.onDownClose);var o=this.closeBtn.label.getRect();this.closeBtn.width=o.width,this.closeBtn.height=o.height,this.closeBtn.visiblePanel=!1,this.drawCloseBtn=function(){this.closeBtn.x=this._width-this.closeBtn.width-this.otstup-2,this.closeBtn.y=5-(this.closeBtn.height+this.otstup)}}function c(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorPage",t.addChild(this),this.contCrop=new PIXI.Container,this.contBtnCreate=new PIXI.Container,this.addChild(this.contBtnCreate),this.centCont=new PIXI.Container,this.tempContainer=new PIXI.Container;var e=new PIXI.Graphics;this.scrshContent=new PIXI.Container,this.scrshOffsetContent=new PIXI.Container,this.scrshImgContent=new PIXI.Container,this.scrshSketchRooms=new PIXI.Container,this.addChild(this.scrshContent),this.scrshContent.addChild(this.scrshOffsetContent),this.scrshContent.addChild(this.scrshSketchRooms),this.scrshOffsetContent.addChild(this.scrshImgContent),this.addChild(this.centCont),this.centCont.addChild(this.tempContainer),this.centCont.addChild(e),this.tempContainer.addChild(this.contCrop),this.centCont.mask=e,this._width=100,this._height=100,this._mashtab=1,this._mashtabImage=1,this._rotation=0,this._activ=!1,this.visible=this._activ;var h=1,n=new PIXI.Point,a=new PIXI.Rectangle,r=(new PIXI.Rectangle,new PIXI.Rectangle),c=new PIXI.Rectangle;this.screenshoot=new s,this.pdfEditorSketchRooms=new o(this.centCont),this.pdfEditorSketchRooms.activ=!0,this.image=new PLImage(this.contCrop),this.image.funComplit=function(){i.image.width=this.picWidth,i.image.height=this.picHeight,c.width=this.picWidth,c.height=this.picHeight},this.setImage=function(t,i){this.image.link=t,void 0!==i?(a.width=i.width,a.height=i.height):(a.width=c.width,a.height=c.height)},this.getPic=function(){var t=Math.min(a.width/c.width,a.height/c.height);0===t&&(t=1),r.width=l.width/this._mashtabImage*t,r.height=l.height/this._mashtabImage*t;var i=this.tempContainer.getBounds();this.scrshImgContent.addChild(this.image),this.scrshSketchRooms.addChild(this.pdfEditorSketchRooms),this.scrshImgContent.scale.set(t,t),this.scrshImgContent.rotation=this._rotation;var e=this.scrshImgContent.getBounds(),h=this.scrshOffsetContent.toLocal(e);h.x<0&&(this.scrshImgContent.x=Math.abs(h.x)),h.y<0&&(this.scrshImgContent.y=Math.abs(h.y));var s=this.scrshImgContent.getBounds().width/i.width;this.scrshSketchRooms.scale.set(s,s);var n=this.scrshImgContent.toGlobal(l),o=this.scrshOffsetContent.toLocal(n);this.scrshOffsetContent.pivot.set(o.x,o.y),this.pdfEditorSketchRooms.activBtnClose=!1;var u=this.screenshoot.getImAd(this.scrshContent,r.width,r.height,"image/jpeg");return this.pdfEditorSketchRooms.activBtnClose=!0,this.contCrop.addChild(this.image),this.centCont.addChild(this.pdfEditorSketchRooms),u},this.setState=function(t){i.pdfEditorSketchRooms.setState(t)};var l=new PIXI.Rectangle;this.cropPic=function(t){this.contCrop.scale.set(this._mashtabImage,this._mashtabImage),this.contCrop.rotation=this._rotation;var i=this.contCrop.getBounds(),s=this.tempContainer.toLocal(i);s.x<0&&(this.contCrop.x=Math.abs(s.x)),s.y<0&&(this.contCrop.y=Math.abs(s.y)),l.x=t.x,l.y=t.y,l.width=t.width,l.height=t.height,n.x=t.x,n.y=t.y;var a=this.contCrop.toGlobal(n),o=this.tempContainer.toLocal(a);this.tempContainer.pivot.set(o.x,o.y),h=Math.min(this._width/t.width,this._height/t.height),this.tempContainer.scale.set(h,h),t.width*h<=this._width?this.centCont.x=(this._width-t.width*h)/2:this.centCont.x=0,t.height*h<=this._height?this.centCont.y=(this._height-t.height*h)/2:this.centCont.y=0,e.clear(),e.beginFill(16711680,0),e.drawRect(0,0,t.width*h,t.height*h),this.pdfEditorSketchRooms.width=t.width*h,this.pdfEditorSketchRooms.height=t.height*h},this.clear=function(){this.pdfEditorSketchRooms.clear()}}function l(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorPage",t.addChild(this),this.content=new PIXI.Container,this.content.interactive=!0,this.addChild(this.content),this.maskedContainer=new PIXI.Container,this.offsetToCenterCont=new PIXI.Container,this.maskGraphics=new PIXI.Graphics,this.centeredImageCont=new PIXI.Container,this.imageContainer=new PIXI.Container,this.content.addChild(this.maskedContainer),this.maskedContainer.addChild(this.offsetToCenterCont),this.maskedContainer.addChild(this.maskGraphics),this.maskGraphics.hitArea=new PIXI.Rectangle(0,0,0,0),this.maskedContainer.mask=this.maskGraphics,this.offsetToCenterCont.addChild(this.centeredImageCont),this.centeredImageCont.addChild(this.imageContainer),this._widthCropComp=100,this._width=100,this._height=100,this._mashtabImage=1,this._mashtab=1,this._rotation=0,this._activ=!0,this.maskedContainer.visible=!0,this.shagRotation=Math.PI/2,this.shagZoom=.1,this.maxZoom=4,this.minZoom=.1,this.debug=!1;var e=1,h=0,s=0,n=!1,o=new Rectangle,r=new Rectangle,l=new Rectangle,d=new Rectangle,g=new Rectangle,p=new PIXI.Rectangle,f=!0,w=new PIXI.Rectangle;this.content.hitArea=w,this.image=new PLImage(this.imageContainer),this.pdfEditorBackground=new u(this.maskedContainer),this.pdfEditorCrop=new c(this.maskedContainer),this.pXD=new a.a,this.pXD.arrBtnEventTransfer=[0,1],this.pXD.oppositeCenter=!0,this.pXD.upBtnRot=!1,this.pXD.butRot=!1,this.wheel=new Pl102Wheel,this.image.funComplit=function(){i.clear(),!1===this.visible&&(this.visible=!0),o.width=this.picWidth,o.height=this.picHeight,i.image.width=this.picWidth,i.image.height=this.picHeight,i.offsetToCenterCont.x=g.width/2,i.offsetToCenterCont.y=g.height/2,i.updateImageSize();var t=.5*i.centeredImageCont.width/i._mashtabImage,e=.5*i.centeredImageCont.height/i._mashtabImage;i.centeredImageCont.pivot.set(t,e),r.p.x=i.offsetToCenterCont.x,r.p.y=i.offsetToCenterCont.y,i.pXD.rectangle=d,i.pdfEditorBackground.setRect(i.pXD._rectangle,d),i.pdfEditorBackground.activ=!0,f=!0,i.updatePosFromRect(i.offsetToCenterCont.position),i.updateToCropRect(),i.dispatchEvent(new B("loadImageComplit"))},this.pXD.funMouseMove=function(){i.checkBorderDrag(),i.pdfEditorBackground.setRect(this._rectangle,d),i.updateToCropRect(),!0===i.debug&&k()},this.pdfEditorBackground.funDown=function(){i.onDown(),n=!0,i.updateStateMenu()},this.pdfEditorBackground.funUp=function(){n=!1,i.updateStateMenu(),i.onUp()},this.wheelDrag=function(t){!0===!(2===s)&&i.zoomPage(t.delta)},this.wheel.on(this.content,"mousewheel",this.wheelDrag),this.setImage=function(t,i){!1===this.image.visible&&(this.image.visible=!0),this.image.link=t,this.pdfEditorCrop.setImage(t,i)},this.updateImageSize=function(){var t=calc.getBoundsRect(o,this._rotation);l.width=t.width,l.height=t.height,(e=g.width/l.width)>g.height/l.height&&(e=g.height/l.height),this.minZoom=e;var s=2*g.width/(l.width*e);this.maxZoom=s+e,this.mashtabImage=e+h,this._mashtabImage>this.maxZoom&&(this.mashtabImage=this.maxZoom),this._mashtabImage<this.minZoom&&(this.mashtabImage=this.minZoom),r.width=l.width*this._mashtabImage,r.height=l.height*this._mashtabImage,r.x=-r.width/2,r.y=-r.height/2,this.centeredImageCont.scale.set(this._mashtabImage,this._mashtabImage),this.updatePosFromRect(i.offsetToCenterCont.position),this.updateViewRect(),this.updateStateMenu(),!0===f&&(this.pXD.rectangle=d),this.pdfEditorBackground.setRect(this.pXD._rectangle,d),!0===this.debug&&k()},this.updateViewRect=function(){r.width>=g.width?d.width=g.width:d.width=r.width,r.height>=g.height?d.height=g.height:d.height=r.height,d.x=-d.width/2,d.y=-d.height/2,d.p.x=g.width/2,d.p.y=g.height/2;var t=d.p.x+d.x,i=d.p.y+d.y;this.pdfEditorBackground.position.set(t,i),this.pXD.maxDragW=d.width,this.pXD.maxDragH=d.height},this.draw=function(){g.width=this._width,g.height=this._height,this.pdfEditorBackground.width=this._width,this.pdfEditorBackground.height=this._height,this.pdfEditorCrop.width=this._widthCropComp,this.pdfEditorCrop.height=this._height,w.width=this._width,w.height=this._height,this.updateImageSize(),this.pXD.rectangle=d,this.pdfEditorBackground.setRect(i.pXD._rectangle,d),this.updateToCropRect(),this.drawMask()},this.drawMask=function(){this.maskGraphics.clear(),this.maskGraphics.beginFill(16711680,0),this.maskGraphics.drawRect(0,0,this._width,this._height)},this.clear=function(){this.pdfEditorCrop.clear(),e=1,h=0,this.mashtabImage=e+h,this.rotation=0,this.pXD.parent=void 0,this.centeredImageCont.scale.set(this._mashtabImage,this._mashtabImage),this.centeredImageCont.rotation=this._rotation,this.image.visible=!1,this.offsetToCenterCont.x=g.width/2,this.offsetToCenterCont.y=g.height/2,this.activ=!0,this.pdfEditorCrop.activ=!1,this.pdfEditorBackground.activ=!1};var _=new PIXI.Point,m=new PIXI.Point,y=new PIXI.Point,v=new PIXI.Point;this.onDown=function(){m=i.content.toLocal(pl102.global),_.x=i.offsetToCenterCont.position.x,_.y=i.offsetToCenterCont.position.y,pl102.stage.off("mousemove",i.movePage),pl102.stage.off("mouseup",i.onUp),pl102.stage.on("mousemove",i.movePage),pl102.stage.on("mouseup",i.onUp)};var b=new PIXI.Point;this.movePage=function(t){var e=pl102.global;t instanceof MouseEvent&&e.set(t.clientX,t.clientY),y=i.content.toLocal(e),v.set(y.x-m.x,y.y-m.y),b.x=_.x+v.x,b.y=_.y+v.y,r.p.x=b.x,r.p.y=b.y,i.offsetToCenterCont.position.set(b.x,b.y),i.updatePosFromRect(i.offsetToCenterCont.position),i.updateViewRect()},this.onUp=function(){pl102.stage.off("mousemove",i.movePage),pl102.stage.off("mouseup",i.onUp)},this.zoomPage=function(t){t>0?e+h<this.maxZoom&&(h+=this.shagZoom):e+h>this.minZoom&&(h-=this.shagZoom),this.updateImageSize(),this.checkBorderDrag(),this.updateToCropRect(),!0===this.debug&&k()},this.rotatePage=function(t){this.rotation=t>0?this._rotation+this.shagRotation:this._rotation-this.shagRotation,this.centeredImageCont.rotation=this._rotation,this.updateImageSize(),this.checkBorderDrag(),this.updateToCropRect()};var x=new PIXI.Point;this.updatePosFromRect=function(t){x.x=0,x.y=0;var i=this.image.getBounds(),e=this.content.toLocal(i);e.x>0&&(x.x=e.x),e.y>0&&(x.y=e.y),r.width+e.x<g.width&&(x.x=r.width+e.x-g.width),r.height+e.y<g.height&&(x.y=r.height+e.y-g.height),r.width<=g.width&&(x.x=e.x+r.width/2-g.width/2),r.height<=g.height&&(x.y=e.y+r.height/2-g.height/2),t.x-=x.x,t.y-=x.y},this.updateDragFromRect=function(t){x.x=0,x.y=0,d.width<t.width&&(t.width=d.width,t.x=-d.width/2),d.height<t.height&&(t.height=d.height,t.y=-d.height/2);var i=d.p.x+d.x,e=d.p.y+d.y,h=t.p.x+t.x,s=t.p.y+t.y,n=d.p.x+d.x+d.width,a=d.p.y+d.y+d.height,o=t.p.x+t.x+t.width,r=t.p.y+t.y+t.height;h-i<0&&(x.x=h-i),s-e<0&&(x.y=s-e),o-n>0&&(x.x=o-n),r-a>0&&(x.y=r-a),t.p.x-=x.x,t.p.y-=x.y},this.updateStateMenu=function(){var t=r.width>g.width,e=r.height>g.height,h=!1;h=(0===s||!0===n)&&(t||e),this.dispatchEvent(new B("pageWasChanged",{name:"pageChange",isInVisibleArea:h,isMaxZoom:!(i._mashtabImage>=i.maxZoom),isMinZoom:!(i._mashtabImage<=i.minZoom),isCrop:!(2===s)}))},this.checkBorderDrag=function(){this.updateDragFromRect(this.pXD._rectangle),this.pXD.draw102(),this.pdfEditorBackground.setRect(this.pXD._rectangle,d)};var P=new PIXI.Point;this.updateToCropRect=function(){P.x=this.pXD._rectangle.p.x+this.pXD._rectangle.x,P.y=this.pXD._rectangle.p.y+this.pXD._rectangle.y;var t=this.content.toGlobal(P),i=this.imageContainer.toLocal(t);p.x=i.x,p.y=i.y,p.width=this.pXD._rectangle.width,p.height=this.pXD._rectangle.height,p.angel=this._rotation,this.pdfEditorCrop.cropPic(p)},this.imageContainer.interactive=!0,this.imageContainer.on("mousedown",this.onDown),this.setState=function(t){if(i.pdfEditorCrop.setState(t),"indexFooterDown"===t.name){if(t.index===s)return;this.pXD.parent=1===t.index?this.content:void 0,2===t.index&&this.updateToCropRect(),s=t.index,!0===f&&(f=!(1===t.index)),this.activ=!(2===t.index),this.pdfEditorCrop.activ=2===t.index,0===t.index?(this.imageContainer.interactive=!0,this.imageContainer.on("mousedown",this.onDown)):(this.imageContainer.off("mousedown",this.onDown),this.imageContainer.interactive=!1),i.pdfEditorBackground.alpha=0===t.index?.5:.8,i.pdfEditorBackground.activ=!(2===t.index),i.pdfEditorBackground.interactive=1===t.index}"zoomDeltaPage"===t.name&&this.zoomPage(t.zoomPage),"rotatePage"===t.name&&this.rotatePage(t.rotatePage),t.name,this.updateStateMenu()};var C=null,I=null,M=null,D=null,R=null;function k(){null===C&&(C=new PIXI.Graphics,i.content.addChild(C),I=new PIXI.Graphics,i.content.addChild(I),M=new PIXI.Graphics,i.centeredImageCont.addChild(M),D=new PIXI.Graphics,i.offsetToCenterCont.addChild(D),R=new PIXI.Graphics,i.imageContainer.addChild(R)),C.clear(),I.clear(),M.clear(),D.clear(),R.clear(),R.beginFill(16711680),R.drawRect(100,100,10,10)}}function u(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorBackground",t.addChild(this),this.funDown=null,this.funUp=null,this.content=new PIXI.Container,this.graphCenter=new PIXI.Graphics,this.graphTop=new PIXI.Graphics,this.graphBottom=new PIXI.Graphics,this.graphLeft=new PIXI.Graphics,this.graphRight=new PIXI.Graphics,this.innerRect=new PIXI.Rectangle,this._width=300,this._height=300,this._alpha=.8,this._activ=!1,this._color=9868436,this._interactive=!1,this.visible=this._activ,this.addChild(this.content),this.content.addChild(this.graphTop),this.content.addChild(this.graphBottom),this.content.addChild(this.graphLeft),this.content.addChild(this.graphRight),this.content.addChild(this.graphCenter),this.draw=function(){this.graphTop.clear(),this.graphBottom.clear(),this.graphLeft.clear(),this.graphRight.clear(),this.graphCenter.clear(),this.graphTop.beginFill(this._color),this.graphBottom.beginFill(this._color),this.graphLeft.beginFill(this._color),this.graphRight.beginFill(this._color),this.graphCenter.beginFill(16711680,0);var t=this.innerRect.y,i=this._height-this.innerRect.y-this.innerRect.height,e=this.innerRect.x,h=this.innerRect.x+this.innerRect.width,s=this._width-h;this.graphCenter.drawRect(this.innerRect.x-3,this.innerRect.y-3,this.innerRect.width+6,this.innerRect.height+6),this.graphTop.drawRect(0,0,this._width,t),this.graphBottom.drawRect(0,t+this.innerRect.height,this._width,i),this.graphLeft.drawRect(0,t,e,this.innerRect.height),this.graphRight.drawRect(h,t,s,this.innerRect.height)},this.setRect=function(t,i){void 0!==i?(this.innerRect.x=Math.round(t.p.x+t.x-(i.p.x+i.x)),this.innerRect.y=Math.round(t.p.y+t.y-(i.p.y+i.y)),this._width=Math.round(i.width),this._height=Math.round(i.height)):(this.innerRect.x=Math.round(t.p.x+t.x),this.innerRect.y=Math.round(t.p.y+t.y)),this.innerRect.width=Math.round(t.width),this.innerRect.height=Math.round(t.height),this.draw()},this.getBoundDragCont=function(t){var i=this.graphCenter.getBounds();return t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height,i},this.onDown=function(){i.funDown&&i.funDown()},this.onUp=function(){i.funUp&&i.funUp()},this.onOut=function(){i.funUp&&i.funUp()},this.draw()}function d(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorMenuHeader",this.pdfEditorMenu=t,this.pdfEditorMenu.addChild(this),this._width=100,this._height=this.pdfEditorMenu.headerHeight,this.contentBtn=new PIXI.Container,this.pdfEditorMenu.addChild(this.contentBtn),this.drawVerticalButtonsLines=!0,this.array=[],this.array[0]=new PLButton(this.contentBtn,0,0,""),this.array[1]=new PLButton(this.contentBtn,0,0,"Load",h),this.array[2]=new PLButton(this.contentBtn,0,0,"Hand",h),this.array[3]=new PLButton(this.contentBtn,0,0,"Zoom+",h),this.array[4]=new PLButton(this.contentBtn,0,0,"Zoom-",h),this.array[5]=new PLButton(this.contentBtn,0,0,"RotLeft",h),this.array[6]=new PLButton(this.contentBtn,0,0,"RotRight",h),this.array[7]=new PLButton(this.contentBtn,0,0,"");for(var e=0;e<this.array.length;e++)1===e&&this.array[e].startFile(".jpg, .png, .bmp, .jpeg, .pdf"),this.array[e].idArr=e;function h(t){2===this.idArr&&(this.activ=!this._activ,this.gPlus.visible=!this._activ);var e={};switch(this.idArr){case 1:e.name="loadFile",e.file=t;break;case 2:e.name="movePage",e.isMovePage=this._activ;break;case 3:e.name="zoomDeltaPage",e.zoomPage=1;break;case 4:e.name="zoomDeltaPage",e.zoomPage=-1;break;case 5:e.name="rotatePage",e.rotatePage=-1;break;case 6:e.name="rotatePage",e.rotatePage=1;break;default:e.name=null}i.pdfEditorMenu.dispatchEvent(new B("onDown",e))}this.setIcons=function(t){for(var i=1;i<this.array.length-1;i++)this.array[i].text="",this.array[i].loadImeg(t[i-1])},this.setState=function(t){"pageChange"===t.name&&(this.array[2].activMouse=!0===t.isCrop?t.isInVisibleArea:t.isCrop,this.array[2].activ=!0===t.isCrop?t.isInVisibleArea:t.isCrop,this.array[2].gPlus.visible=!this.array[2].activ,!0===this.array[2].activ&&!1===this.array[2].activMouse&&(this.array[2].activ=!1),this.array[3].activMouse=!0===t.isCrop?t.isMaxZoom:t.isCrop,this.array[4].activMouse=!0===t.isCrop?t.isMinZoom:t.isCrop,this.array[5].activMouse=t.isCrop,this.array[6].activMouse=t.isCrop)},this.clear=function(){for(var t=1;t<this.array.length-1;t++)this.array[t].activ=!1,this.array[t].activMouse=!0};var s,n,a,o=0;this.graphicsButtonsLines=new PIXI.Graphics,this.contentBtn.addChild(this.graphicsButtonsLines),this.draw=function(){o=(this._width-this._height*(this.array.length-1))/2;for(var t=0;t<this.array.length;t++)0!==t?t!==this.array.length-1?(this.array[t].width=this._height,this.array[t].height=this._height,this.array[t].x=o,1===t&&(this.array[t].x=0),o+=this._height):(this.array[t].x=this._width-this.array[0].width-this._height,this.array[t].height=this._height,this.array[t].width=this.array[0].width+this._height):(this.array[t].x=this._height,this.array[t].width=o,this.array[t].height=this._height);for(t=0;t<this.array.length;t++)this.debagGraf1(this.array[t]);if(this.drawVerticalButtonsLines){this.graphicsButtonsLines.clear(),this.graphicsButtonsLines.beginFill();for(t=0;t<this.array.length;t++)if(i.array[t]&&i.array[t].visible&&t!==this.array.length-1){var e=i.array[t].x,h=i.array[t].y,s=i.array[t].width,n=i.array[t].height;this.graphicsButtonsLines.lineStyle(1,10263708,1),this.graphicsButtonsLines.moveTo(e+s-.5,h),this.graphicsButtonsLines.lineTo(e+s-.5,h+n),this.graphicsButtonsLines.lineStyle(1,5395026,1),this.graphicsButtonsLines.moveTo(e+s-1.5,h),this.graphicsButtonsLines.lineTo(e+s-1.5,h+n)}this.graphicsButtonsLines.endFill()}this.graphicsButtonsLines.parent.addChild(this.graphicsButtonsLines)};this.debagGraf1=function(t){var i=t.gPlus;if(i.clear(),i.beginFill(0,.5),220,150,t.x<150-t.width)i.drawRect(0,this._height-27,t.width,26);else if(t.x>370)i.drawRect(0,7,t.width,this._height-7-1);else{a=this._height-27-7,370,220/180;var e=0,h=t.width;if(t.x<150&&(e=150-t.x,i.drawRect(0,this._height-27,e,26)),t.x<=370&&t.x+t.width>=370&&(h=370-t.x,i.drawRect(h,7,t.width-h,this._height-7-2)),t.x<=150||t.x<=370){for(var o=e;o<=h;o++)n=(t.x+o-150)/(220/180),s=a/2-Math.sin(n*Math.PI/180-Math.PI/2)*(a/2)+7,o==e?i.moveTo(o,s):i.lineTo(o,s);i.lineTo(h,this._height-1),i.lineTo(e,this._height-1)}}}}function g(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorMenuFooter",this.pdfEditorMenu=t,this.pdfEditorMenu.addChild(this),this._width=100,this._height=this.pdfEditorMenu.footerHeight,this._otstup=this.pdfEditorMenu.otstup,this._index=0,this._languageComponent=null,this.array=[],this.numPages=0,this.onDown=function(t,e){3===t?(i.array[t].activ=!0,setTimeout(function(){i.array[t].activ=!1},100),i.pdfEditorMenu.dispatchEvent(new B("onDown",{name:"savePage"}))):i.index=t;var h={};h.name="indexFooterDown",h.index=i._index,i.numPages>1?i.pdfEditorMenu.isHideMenuNav=0===i.index:i.pdfEditorMenu.isHideMenuNav=!1,i.pdfEditorMenu.isHideSketchRooms=2===i.index,i.pdfEditorMenu.dispatchEvent(new B("onDown",h))},this.array[0]=new w(this,0,0,"Page",this.onDown),this.array[0].funSelectPage=function(t){i.pdfEditorMenu.dispatchEvent(new B("onDown",{name:"selectPage",index:t}))},this.array[1]=new f(this,0,0,"Crop",this.onDown),this.array[2]=new f(this,0,0,"Add sticker",this.onDown),this.array[3]=new f(this,0,0,"Save",this.onDown);for(var e=0;e<this.array.length;e++)this.array[e].idArr=e;var h=0,s=0;this.draw=function(){s=this._width/this.array.length,h=0;for(var t=0;t<this.array.length;t++)this.array[t].otstup=this._otstup,this.array[t].width=s,this.array[t].height=this._height,this.array[t].x=h,h+=s},this.setState=function(t){"loadFile"===t.name&&this.updateComboBox(t.pages),"secondPage"===t.name&&(this.array[0].index=t.index-1)},this.clear=function(){this.array[0].activ=!0,this.updateComboBox(1);for(var t=1;t<this.array.length-1;t++)this.array[t].activ=!1},this.setIcons=function(t){this.array[1].setIcons(t[0]),this.array[2].setIcons(t[1]),this.array[3].setIcons(t[2])},this.updateComboBox=function(t){this.numPages=t;for(var i=[],e=1;e<=t;e++)i.push("Page "+e);this.pdfEditorMenu.isHideMenuNav=1!==t,this.array[0].setTabs(i)}}function p(t,i,e,h,s){PIXI.Container.call(this);var n=this;this.type="FooterWindow",this.fun=s,this.w=new PLWindow(this),this.w.text=h,this.w.drag=!1,this.w._textAlign="center",this.idArr=-1,this.w.interactive=!0,this.w.on("mousedown",function(){n.fun&&n.fun(n.idArr,n._activ),n.updateActiv()}),t.addChild(this),this._otstup=2,this._width=100,this._height=100,this._activ=!1,this._x=i||0,this._y=e||0,this.correctTextAlign=function(){"left"===this.w._textAlign&&(this.w.label.x=5);var t=this.w.label.getLocalBounds().width;"center"===this.w._textAlign&&(this.w.label.x=(this._width-t)/2),"right"===this.w._textAlign&&(this.w.label.x=this.width-t-5)},this.draw=function(){},this.updateActiv=function(){}}function f(t,i,e,h,s){p.call(this,t,i,e,h,s);this.type="FooterWindowCheck",t.addChild(this.w),this.draw=function(){var t=this._height-2*this._otstup;this.btn.x=this._width/2-t/2,this.btn.y=this._otstup,this.btn.width=t,this.btn.height=t},this.updateActiv=function(){this.btn.activ=this._activ},this.btn=new PLButton(this.w.content,0,0,""),this.btn.setStile(1),this.btn.okDown=!1,this.setIcons=function(t){this.btn.loadImeg(t)}}function w(t,i,e,h,s){p.call(this,t,i,e,h,s),this.type="FooterWindowCombo",t.addChild(this.w);var n=this;this._otstup=2,this._index=-1,this.funSelectPage=null,this.draw=function(){var t=this._height/2-this.comboBox.height/2;this.comboBox.x=t,this.comboBox.y=t,this.comboBox.width=this._width-2*t},this.onClik=function(){n.fun&&n.fun(n.idArr,this._activ)},this.onDown=function(){n.funSelectPage&&n.funSelectPage(this._index+1)},this.comboBox=new PLComboBox(this.w.content),this.comboBox.fun=this.onDown,this.comboBox.funClick=this.onClik,this.comboBox.addArr(["Page 1"]),this.comboBox.revertPosCont=!0,this.comboBox.visiCol=7,this.setTabs=function(t){1===t.length?this.comboBox.activMouse=!1:this.comboBox.activMouse=!0,this.comboBox.clear(),this.comboBox.addArr(t)}}function _(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorMenuNav",this.pdfEditorMenu=t,this.pdfEditorMenu.addChild(this),this._width=100,this._height=100,this._otstup=2,this._mashtab=1,this.wh=52,this._index=1,this.pages=1,this.array=[],this.onDown=function(){0===this.idArr?i.index=i._index-1:i.index=i._index+1,i.pdfEditorMenu.dispatchEvent(new B("onDown",{name:"secondPage",index:i._index}))},this.setState=function(t){"selectPage"===t.name&&(this.index=t.index),"loadFile"===t.name&&(this.index=1,this.array[0].activMouse=1!==i._index,this.pages=t.pages)},this.array[0]=new PLButton(this,0,0,"Left",this.onDown),this.array[1]=new PLButton(this,0,0,"Right",this.onDown);for(var e=0;e<this.array.length;e++)this.array[e].idArr=e,this.array[e].setStile(1),this.array[e].width=this.wh,this.array[e].height=this.wh;this.draw=function(){this.array[0].x=this._otstup,this.array[0].y=(this._height/2-this.wh/2)/this._mashtab,this.array[1].x=this._width-this.wh-this._otstup,this.array[1].y=(this._height/2-this.wh/2)/this._mashtab},this.setIcons=function(t){for(var i=0;i<this.array.length;i++)this.array[i].text="",this.array[i].loadImeg(t[i])}}function m(t,i,e,h){PIXI.Container.call(this),this.type="GalleryBase";var s,n,a,o,r,c,l,u,d,g=this;t&&t.addChild(this),this.x=i||0,this.y=e||0,this.fun=h,this._widthPic=100,this._heightPic=100,this._width=100,this._height=100,this._otstup=2,this._kolII=100,this._index=-1,this._otstup1=10,this.clearIndex=!0,this._color="0xff0000",this._lineSize=2,this._boolPositScrol=!0,this._boolPositOtctup=!0,this._boolWheel=!0,this.sahDelta=20,this.funLoad,this.funOver,this.funOut,this.arrayKesh=[],this.arrayObj=[],this.array=[],this.ww=1,this.wM=1,this.hh=1,this.hM=1,this.graphicsMask=new PIXI.Graphics,this.addChild(this.graphicsMask),this.content=new PIXI.Container,this.addChild(this.content),this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this.content.mask=this.graphicsMask,this.scrollBarH=new PLScrollBarH(this,0,this._height-this.otstup1,function(){g.scrolPos(!1)}),this.scrollBarH.graphics.buttonMode=!0,this.scrollBarV=new PLScrollBarV(this,this._width-this.otstup1,0,function(){g.scrolPos(!1)}),this.scrollBarV.graphics.buttonMode=!0,this.createZamen,this.complitLoad,this.postDraw,this.funOver,this.funOut,this.fOver=function(t){g.funOver&&g.funOver(t)},this.fOut=function(t){g.funOver&&g.funOver(t)},this.createDrawBox=function(t){for(var i=0;i<this.arrayKesh.length;i++)if(0==this.arrayKesh[i].visible&&1==this.arrayKesh[i].isObj(t))return this.arrayKesh[i];for(i=0;i<this.arrayKesh.length;i++)if(0==this.arrayKesh[i].visible)return this.arrayKesh[i];return null!=this.createZamen?this.arrayKesh.push(this.createZamen()):this.arrayKesh.push(new y(this.content,0,0,this.downBtn)),this.funOver&&(this.arrayKesh[this.arrayKesh.length-1].funOver=this.fOver),this.funOut&&(this.arrayKesh[this.arrayKesh.length-1].funOut=this.fOut),this.arrayKesh[this.arrayKesh.length-1].width=this._widthPic,this.arrayKesh[this.arrayKesh.length-1].height=this._heightPic,this.arrayKesh[this.arrayKesh.length-1].color=this._color,this.arrayKesh[this.arrayKesh.length-1].idArrKesh=this.arrayKesh.length-1,this.arrayKesh[this.arrayKesh.length-1].funLoad=this.funLoad,this.arrayKesh[this.arrayKesh.length-1].funOver=this.funOver,this.arrayKesh[this.arrayKesh.length-1].funOut=this.funOut,this.arrayKesh[this.arrayKesh.length-1]},this.scrolPos=function(t){1==t?(g.scrollBarV.value=this.content.y/(this._height-g.scrollBarV.heightContent)*100,g.scrollBarH.value=this.content.x/(this._width-g.scrollBarH.widthContent)*100):(g.content.y=g.scrollBarV.value/100*(this._height-g.scrollBarV.heightContent),g.content.x=g.scrollBarH.value/100*(this._width-g.scrollBarH.widthContent))},this.korektPoIndex=function(t){null==t&&(t=this._index),null!=this.array[t]&&(this.array[t].x+this.content.x+this.array[t].width-this.otstup>this._width&&(this.content.x=-(this.array[t].x+this.array[t].width-this._width+this.otstup)),this.array[t].x+this.content.x-this.otstup<0&&(this.content.x=-this.array[t].x+this.otstup),this.array[t].y+this.content.y+this.array[t].height-this.otstup>this._height&&(this.content.y=-(this.array[t].y+this.array[t].height-this._height+this.otstup)),this.array[t].y+this.content.y-this.otstup<0&&(this.content.y=-this.array[t].y+this.otstup),this.scrolPos(!0))},this.downBtn=function(){g.index=this.idArr,g.obj=g.array[this.idArr].object,g.fun&&g.fun()},this.sahLoad=0,this.sahRendom=0,this.funLoad=function(){g.sahLoad++,g.sahLoad>g.array.length?(null!=this.complitLoad&&this.complitLoad(),g.draw()):this.sahRendom==g.sahRendom&&(g.sahRendom=Math.round(1e4*Math.random()),g.array[g.sahLoad-1].sahRendom=g.sahRendom,g.array[g.sahLoad-1].startLoad(g.array[g.sahLoad-1].object11))},this.start=function(t){this.clear(),this.arrayObj=t;for(var i=0;i<this.arrayObj.length;i++)(r=this.createDrawBox(this.arrayObj[i])).visible=!0,r.object11=this.arrayObj[i],r.idArr=this.array.length,this.array.push(r);this.draw(),0!=this.array.length&&(g.sahLoad=0,this.sahRendom=Math.round(1e4*Math.random()),g.array[g.sahLoad].sahRendom=1*this.sahRendom,this.funLoad())},this.draw=function(){this.preDraw&&this.preDraw(),s=0,n=0,this.otstup1+2*this.otstup,a=1,this._kolII>this.array.length&&(a=this.array.length*(this._widthPic+this._otstup)+this._otstup),o=this._heightPic+2*this._otstup;for(var t=0;t<this.array.length;t++)this.array[t].x=s*(this._widthPic+this._otstup)+this._otstup,this.array[t].y=n*(this._heightPic+this._otstup)+this._otstup,this.array[t].x+this._widthPic+this._otstup>a&&(a=this.array[t].x+this._widthPic+this._otstup),o=(n+1)*(this._heightPic+this._otstup)+this._otstup,++s>=this._kolII&&(s=0,n++);a>this._width?this.scrollBarH.visible=!0:this.scrollBarH.visible=!1,o>this._height?this.scrollBarV.visible=!0:this.scrollBarV.visible=!1,this.scrollBarH.widthContent=a,this.scrollBarV.heightContent=o,c=a>this._width?this._width:a,l=o>this._height?this._height:o,this.ww=a,this.wM=c,this.hh=o,this.hM=l,this._boolPositScrol?this._boolPositOtctup?(this.scrollBarH.y=l-this.otstup-this._otstup1,this.scrollBarV.x=c-this.otstup-this._otstup1):(this.scrollBarH.y=l+this.otstup,this.scrollBarV.x=c+this.otstup):this._boolPositOtctup?(this.scrollBarH.y=this.otstup,this.scrollBarV.x=this.otstup):(this.scrollBarH.y=-this.otstup-this._otstup1,this.scrollBarV.x=-this.otstup-this._otstup1),this.graphicsMask.clear(),this.graphicsMask.beginFill(16711680,0),this.graphicsMask.drawRect(0,0,c,l),this.graphicsMask.endFill(),this._boolWheel&&(this.graphics.clear(),this.graphics.beginFill(16711680,0),this.graphics.drawRect(0,0,a,o),this.graphics.endFill()),this.postDraw&&this.postDraw()},this.drawScrol=function(){this.scrollBarH.height=this._otstup1,this.scrollBarH.width=this._width,this.scrollBarV.width=this._otstup1,this.scrollBarV.height=this._height},this.drawScrol(),this.clear=function(){this.clearPosit();for(var t=0;t<this.arrayKesh.length;t++)this.arrayKesh[t].clear();this.array.length=0},this.clearIndex=!0,this.clearPosit=function(){this.content.x=0,this.content.y=0,this.scrollBarH.scrolValue=0,this.scrollBarV.scrolValue=0,this.clearIndex&&(this.index=-1)},this.mousewheel=function(t){g.kolII<=g.array.length?(u=(g.heightPic+g.otstup)*Math.ceil(g.array.length/g.kolII)-g._height,d=(g.widthPic+g.otstup)*g.kolII-g._width):(u=g.heightPic+g.otstup-g._height,d=(g.widthPic+g.otstup)*g.array.length-g._width),g.scrollBarV.visible?t.delta>0?g.content.y>=0?(g.content.y=0,g.scrollBarV.scrolValue=0):(g.scrollBarV.scrolValue-=g.sahDelta,g.content.y+=g.sahDelta):g.content.y<=-(u+g.otstup)?(g.content.y=-(u+g.otstup),g.scrollBarV.scrolValue=u):(g.scrollBarV.scrolValue+=g.sahDelta,g.content.y-=g.sahDelta):g.scrollBarH.visible&&(t.delta>0?g.content.x>=0?(g.content.x=0,g.scrollBarH.scrolValue=0):(g.scrollBarH.scrolValue-=g.sahDelta,g.content.x+=g.sahDelta):g.content.x<=-(d+g.otstup)?(g.content.x=-(d+g.otstup),g.scrollBarH.scrolValue=d):(g.scrollBarH.scrolValue+=g.sahDelta,g.content.x-=g.sahDelta))};var p=this._boolWheel;this._boolWheel=null,this.boolWheel=p}function y(t,i,e,h){PIXI.Container.call(this),this.type="BoxGalleryIcons";var s,n=this;t.addChild(this),this.x=i||0,this.y=e||0,this.fun=h,this._link="",this._title="",this._width=100,this._height=100,this._otstup=2,this.clearIndex=!0,this._object=null,this._activ=!1,this.idArr=-1,this.idArrKesh=-1,this.id=-1,this.funLoad,this.postDraw,this.funOver,this.funOut,this.content=new PIXI.Container,this.addChild(this.content),this.tween=new TWEEN.Tween(this.content),this.panel=new PLPanel(this.content,0,0),this.image=new PLImage(this.content,0,0,void 0,function(){this.height=this.picHeight,this.width=this.picWidth,n.draw(),n.funLoad&&n.funLoad()}),this.label=new PLLabel(this.content,0,0,""),this.image._preloaderBool=!0,this.image.visible=!1,this.label.visible=!1,this.graphics=new PIXI.Graphics,this.content.addChild(this.graphics),this.object,this._color=16711680,this._lineSize=2,this.boolOut=!0,this.draw=function(){this.graphics.clear(),1==this.boolOut?this.graphics.beginFill(16777215,0):this.graphics.beginFill(16777215,.2),this.graphics.drawRect(0,0,this._width,this._height),this.graphics.endFill(),1==this._activ&&(this.graphics.lineStyle(this._lineSize,this._color,1),this.graphics.drawRect(this._lineSize/2,this._lineSize/2,this._width-this._lineSize,this._height-this._lineSize),this.graphics.endFill()),(s=(this._width-2*this._otstup)/this.image.width)>(this._height-2*this._otstup)/this.image.height&&(s=(this._height-2*this._otstup)/this.image.height),this.image.scale.x=s,this.image.scale.y=s,this.image.x=(this._width-this.image.width*s)/2,this.image.y=(this._height-this.image.height*s)/2,this.label.x=(this._width-this.label.curW)/2,this.label.y=this._height-this.label.curH-this._otstup,this.postDraw&&this.postDraw()},this.isObj=function(t){return null!=this.object&&null!=t&&null!=t.link&&null!=this.object.link&&this.object.link==t.link},this.startLoad=function(t){this.object=t,t.title&&(this.label.text=t.title,this.label.value=t.title,this.label.visible=!0),t.link?(this.image.visible=!0,this.image.link==t.link?n.funLoad&&n.funLoad():(this.image.width=100,this.image.height=100,this.image.link=t.link)):n.funLoad&&n.funLoad(),this.draw()},this.clear=function(){this.visible=!1,this.label.visible=!1,this.image.visible=!1,this.clearIndex&&(this.activ=!1)},this.funOver,this.funOut,this.mouseOver=function(t){n.boolOut=!1,n.draw(),n.funOver&&n.funOver(this)},this.mouseOut=function(t){n.boolOut=!0,n.draw(),n.funOut&&n.funOut(this)},this.mouseDown=function(t){n.draw(),n.fun&&n.fun()},this.draw(),this.graphics.interactive=!0,this.graphics.buttonMode=!0,this.graphics.on("mouseover",this.mouseOver),this.graphics.on("mouseout",this.mouseOut),this.graphics.on("mousedown",this.mouseDown)}function v(t){PIXI.Container.call(this);var i=this;function e(){i.gallSketchRooms.off("click",h),i.gallSketchRooms.off("mouseout",h),pl102.stage.off("mouseup",e)}function h(t){var e="mouseout"===t.type,h=null;-1!==i.index&&(h=i.gallSketchRooms.array[i.index].createParam),i.pdfEditorMenu.dispatchEvent(new PdfEditorEvent("onCreateBtn",{name:"createSketchRoom",id:h.id,text:h.text,isOut:e}))}this.type="PdfEditorMenuSketchRooms",this.pdfEditorMenu=t,this.pdfEditorMenu.addChild(this),this._otstup=this.pdfEditorMenu.otstup,this._otstup1=this.pdfEditorMenu.otstup1,this._width=this.pdfEditorMenu.sketchRoomsWidth,this._height=100,this.btnHeight=this.pdfEditorMenu.btnHeight,this._index=-1,this._language=null,this.visible=!1,this.gallSketchRooms=new b(this,0,0,function(){i.index=this._index,this.startPoint=this.toLocal(pl102.global),this.on("mouseout",h),this.on("click",h),pl102.stage.on("mouseup",e)}),this.gallSketchRooms.kolII=1,this.gallSketchRooms.otstup=this._otstup,this.gallSketchRooms.height=this._height,this.gallSketchRooms.heightPic=this.btnHeight,this.setArray=function(t){this.gallSketchRooms.start(t)},this.clear=function(){this.visible=!1},this.draw=function(){var t=3*this._otstup+this.gallSketchRooms.scrollBarV.width,i=this.gallSketchRooms.scrollBarV.visible;this.gallSketchRooms.widthPic=!0===i?this._width-t:this._width,this.gallSketchRooms.width=this._width}}function b(t,i,e,h){m.call(this,t,i,e,h),this.type="GallSketchRooms",this.fun=h;var s=this;function n(t,i){return t.text.localeCompare(i.text)}this._language=null,this.createZamen=function(){var t=new x(this.content,0,0,this.downBtn);return t.language=this._language,t},this.scrollBarV.otstup=4,this.scrollBarH.otstup=4,this.otstup1=15,this.boolPositScrol=!0,this.boolPositOtctup=!1,this.postDraw=function(){this.scrollBarH.visible=!1,this.array=s.originArr||this.array},this.preDraw=function(){s.originArr=this.array.slice(),this.array.sort(n)}}function x(t,i,e,h){y.call(this,t,i,e,h),this.type="BoxGalleryIcons3",this.fun=h;var s,n=this;this._lineSize=3,this._text="",this._language=null,this.borderOffset=6,this.startColor=this.panel.color,this.object=null,this.createParam={},this.translations=null,this.pnl=new PLPanel(this,0,0,h),this.pnl.addChild(this.content),this.startLoad=function(t){if(s=!1,this.object=t,this.createParam={},this.createParam.id=t.id,t.translations){var i=t.name;null!==this._language&&(this.translations=t.translations.name,i=this.translations[this._language]),this.text=i,this.createParam.text=this._text,this.label.visible=!0,s=!0}t.link&&(this.image.visible=!0,this.image.link===t.link?s=!0:(this.image.width=100,this.image.height=100,this.image.link=t.link)),s&&n.funLoad(),this.draw(),this.lineSize=1,this.color=0},this.panelLeft=new PLPanel(this,0,0),this.panelLeft.color=15921135,this.panelRight=new PLPanel(this,0,0),this.panelRight.color=15921135,this.postDraw=function(){this.label.x=(this._width-this.label.curW)/2,this.label.y=(this._height-this.label.curH)/2,this.pnl.x=this.x,this.pnl.y=this.panel.y,this.pnl.width=this.width-10,this.pnl.height=this.panel.height,this.panelLeft.width=this.borderOffset,this.panelRight.width=this.borderOffset,this.panelLeft.height=this._height,this.panelRight.height=this._height,this.panelLeft.x=this.x,this.panelRight.x=this._width-this.borderOffset-this.x-1}}function P(t){PIXI.Container.call(this);this.type="PdfEditorMenu",this.pdfEditor=t,this.pdfEditor.addChild(this),this._width=100,this._height=100,this._otstup=this.pdfEditor.otstup,this._otstup1=this.pdfEditor.otstup1,this._mashtab=1,this._isHideMenuNav=!0,this._isHideSketchRooms=!0,this._languageComponent=null,this.headerHeight=this.pdfEditor.headerHeight,this.footerHeight=this.pdfEditor.footerHeight,this.sketchRoomsWidth=this.pdfEditor.sketchRoomsWidth,this.btnHeight=this.pdfEditor.btnHeight,this.pdfEditorMenuHeader=new d(this),this.pdfEditorMenuFooter=new g(this),this.pdfEditorMenuNav=new _(this),this.pdfEditorMenuSketchRooms=new v(this),this.setIcons=function(t){this.pdfEditorMenuHeader.setIcons(t[0]),this.pdfEditorMenuFooter.setIcons(t[1]),this.pdfEditorMenuNav.setIcons(t[2])},this.draw=function(){this.pdfEditorMenuHeader.width=this._width/this._mashtab,this.pdfEditorMenuFooter.width=this._width/this._mashtab,this.pdfEditorMenuNav.width=this._width/this._mashtab,this.pdfEditorMenuSketchRooms.x=this._width/this._mashtab-this.sketchRoomsWidth-this._otstup1,this.pdfEditorMenuSketchRooms.y=this.headerHeight+this._otstup1;var t=this.footerHeight-this.footerHeight*this._mashtab;this.pdfEditorMenuFooter.y=(this._height-this.footerHeight+t)/this._mashtab;var i=this.pdfEditorMenuFooter.y-this.pdfEditorMenuSketchRooms.y-this._otstup1;this.pdfEditorMenuSketchRooms.height=i},this.clear=function(){this.pdfEditorMenuHeader.clear(),this.pdfEditorMenuFooter.clear(),this.pdfEditorMenuSketchRooms.clear()},this.setState=function(t){this.pdfEditorMenuHeader.setState(t),this.pdfEditorMenuFooter.setState(t),this.pdfEditorMenuNav.setState(t)},this.setSketchRooms=function(t){this.pdfEditorMenuSketchRooms.setArray(t)}}function C(t){PIXI.Container.call(this);var i=this;this.type="PdfEditorPreloader",t.addChild(this),this._width=100,this._height=100,this._activ=!1,this.backgroundColor=10526880,this.backgroundAlpha=.8,this.visible=this._activ,this.interactive=!0,this.graphics=new PIXI.Graphics,this.addChild(this.graphics),this.preloader=new PLPreloader(this),this.button=new PLButton(this,0,0,"Load file",function(t){i.dispatchEvent(new B("loadFileFromBtn",{file:t}))}),this.button.startFile(".jpg, .png, .bmp, .jpeg, .pdf"),this.draw=function(){this.graphics.clear(),this.graphics.beginFill(this.backgroundColor,this.backgroundAlpha),this.graphics.drawRect(0,0,this._width,this._height),this.button.x=this._width/2-this.button.width/2,this.button.y=this._height/2-this.button.height/2,this.preloader.x=this._width/2-this.preloader.width/2,this.preloader.y=this._height/2-this.preloader.height/2},this.setTypeComp=function(t){this.preloader.activ=0===t,this.button.visible=1===t},this.setTypeComp(0),this.draw()}function I(t){PIXI.Container.call(this);var i=this;this.type="PdfEditor",t.addChild(this),this._width=100,this._height=100,this._otstup=2,this._otstup1=5,this._mashtab=1,this._languageComponent=null,this.headerHeight=60,this.footerHeight=80,this.sketchRoomsWidth=200,this.widthCropComp=this._width-this.sketchRoomsWidth,this.btnHeight=27,this.panel=new PLPanel(this),this.panel.color=12566463,this.debug=!1,this.pdfEditorConvert=new h,this.pdfEditorPage=new l(this),this.pdfEditorMenu=new P(this),this.pdfEditorPreloader=new C(this),this.pdfEditorPreloader.setTypeComp(1),this.pdfEditorMenu.addEventListener("onDown",function(t){i.pdfEditorPage.setState(t.param),i.pdfEditorMenu.setState(t.param),"selectPage"===t.param.name&&i.pdfEditorConvert.getPic(t.param.index),"loadFile"===t.param.name&&(i.dispatchEvent(new B("getFile",t.param.file)),i.setFile(t.param.file)),"secondPage"===t.param.name&&i.pdfEditorConvert.getPic(t.param.index)}),this.pdfEditorMenu.addEventListener("onCreateBtn",function(t){i.pdfEditorPage.setState(t.param)}),this.pdfEditorPreloader.activ=!0,this.pdfEditorPreloader.addEventListener("loadFileFromBtn",function(t){i.dispatchEvent(new B("getFile",t.param.file)),i.setFile(t.param.file)}),this.pdfEditorPage.addEventListener("loadImageComplit",function(){i.pdfEditorPreloader.activ=!1,i.debug}),this.pdfEditorPage.addEventListener("pageWasChanged",function(t){i.pdfEditorMenu.setState(t.param),"getPhoto"===t.param.name&&(i.dispatchEvent(new B("getPng",t.param.image)),!0===i.debug&&e.setB64(t.param.image))}),this.pdfEditorConvert.addEventListener("loadFile",function(t){i.pdfEditorMenu.setState(t.param),i.pdfEditorConvert.getPic(i.correntPage)}),this.pdfEditorConvert.addEventListener("loadPage",function(t){i.pdfEditorPreloader.activ=!1,i.handlFile(t.param.image,t.param.rect)}),this.draw=function(){this.pdfEditorPage.x=this._otstup1,this.pdfEditorPage.y=(this.headerHeight+this._otstup1)*this._mashtab,this.widthCropComp=this._width-this.sketchRoomsWidth*this._mashtab-2*this._otstup1,this.pdfEditorPage.width=this._width-2*this._otstup1;var t=this._height-this.headerHeight*this._mashtab-this.footerHeight*this._mashtab-2*this._otstup1;this.pdfEditorPage.height=t,this.pdfEditorPage.widthCropComp=this.widthCropComp,this.pdfEditorMenu.draw(),!0===this.debug&&e.update()},this.setFile=function(t){this.pdfEditorPreloader.activ=!0,this.pdfEditorPreloader.setTypeComp(0),this.pdfEditorPage.clear(),this.pdfEditorMenu.clear(),this.correntPage=1,t?this.handlFile(t):this.pdfEditorPreloader.setTypeComp(1)},this.handlFile=function(t,i){var e=this.getTypeFile(t);null!==e?("pdf"===e&&this.pdfEditorConvert.startPDF(t),"image"===e&&this.pdfEditorPage.setImage(t,i)):this.pdfEditorPreloader.setTypeComp(1)},this.setIcons=function(t){this.pdfEditorMenu.setIcons(t)},this.setSketchRooms=function(t){this.pdfEditorMenu.setSketchRooms(t)},this.getTypeFile=function(t){return-1!==t.indexOf("image")?"image":-1!==t.indexOf("pdf")?"pdf":null};var e=null,s=null;!0===this.debug&&(e=new M(this),s=new PIXI.Graphics,i.addChild(s))}function B(t,i){this.type=t||null,this.param=i||{}}function M(t){var i=this;this.content=new PIXI.Container,t.addChild(this.content),this.window=new PLWindow(this.content),this.window.width=150,this.window.y=410;var e=new PIXI.Graphics;this.window.content.addChild(e),this.image=new PLImage(this.window.content),this.image.funComplit=function(){var t=Math.min(500/this.picWidth,500/this.picHeight);i.image.width=this.picWidth,i.image.height=this.picHeight,i.image.x=i.window.width,trace("<<>>--------------------------------------------------"),trace("<<>>--размер картинки--",this.picWidth,this.picHeight),trace("<<>>--------------------------------------------------"),i.image.scale.set(t,t)},this.pdfViewer=new PDFViwer(this.window.content,function(){this.hronPDF.getPic(this.numList,void 0,function(i){t.setFile(i)})}),this.pdfViewer.wh=60,this.pdfViewer.wI=2,this.pdfViewer.wJ=2,this.pdfViewer.povedenie=1,this.pdfViewer.x=180,this.addFileToGal=function(t){i.pdfViewer.addFileToGal(t)},this.setB64=function(t){i.image.link=t};var h=0;this.slid=new PLSliderBig(this.window.content,5,h,"width",function(){t.width=this.value},200,1e3),this.slid.value=t._width,this.slid.width=130,h+=this.slid.height,this.slid1=new PLSliderBig(this.window.content,5,h,"height",function(){t.height=this.value},200,1e3),this.slid1.width=130,h+=this.slid1.height,this.slid2=new PLSliderBig(this.window.content,5,h,"otstup",function(){t.otstup=this.value},0,100),this.slid2.width=130,h+=this.slid2.height,this.slid3=new PLSliderBig(this.window.content,5,h,"otstup1",function(){t.otstup1=this.value},0,100),this.slid3.width=130,h+=this.slid3.height,this.window.height=h+2,this.update=function(){this.slid.value=t._width,this.slid1.value=t._height,this.slid2.value=t._otstup,this.slid3.value=t._otstup1},this.update()}function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(){if(window.calc)return window.calc;window.calc=this;var t,i,e,h,s=new k(0,0,0),n=new k(0,0,0),a=new k(0,0,0),o=new k(0,0,0);this.DEG2RAD=Math.PI/180,this.RAD2DEG=180/Math.PI,this.getAngle=function(t,i){return i=i||o,t=t||o,Math.atan2(i.y-t.y,i.x-t.x)};var r,c,l,u,d,g,p,f,w,_=0;this.getAngle2=function(t,i){return i=i||o,t=t||o,(_=Math.atan2(i.y-t.y,i.x-t.x))<0&&(_+=2*Math.PI),_},this.getDistance=function(t,i){return null==t?0:(null==i&&(i=o),i=i||o,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)))},this.getVector=function(t,i,e){if(null==e)e=new k(0,0);return t<0&&(i+=Math.PI),e.x=Math.abs(t)*Math.cos(i),e.y=Math.abs(t)*Math.sin(i),e},this.isPointInLin=function(t,e,s,o,r){return this.getTreeAngel(t,e,s),r<0&&2*Math.abs(r)>h?null:n.x<=h+r&&n.x>=-r&&Math.abs(n.y)<=o?((a=n.x<0?this.getVector(n.x,i-Math.PI):this.getVector(n.x,i)).x+=e.x,a.y+=e.y,a.z=n.y,a):null},this.okrugPoint=function(t,i){null==i&&(i=100),t.x=Math.round(t.x/i)*i,t.y=Math.round(t.y/i)*i},this.okrugNumber=function(t,i){null==i&&(i=100);var e=Math.round(t*i)/i;return t=e,e},this.isInTriangle=function(t,i,e,h){var s=(t.x-h.x)*(i.y-t.y)-(i.x-t.x)*(t.y-h.y),n=(i.x-h.x)*(e.y-i.y)-(e.x-i.x)*(i.y-h.y),a=(e.x-h.x)*(t.y-e.y)-(t.x-e.x)*(e.y-h.y);return s>=0&&n>=0&&a>=0||s<=0&&n<=0&&a<=0},this.getTreeAngel=function(t,s,a,c){return i=this.getAngle(s,t),e=this.getAngle(s,a),r=this.getDistance(s,a),h=this.getDistance(t,s),this.getVector(r,e-i,n),e=this.getAngle(o,n),null==c?e:e>0?e:2*Math.PI+e},this.getTreeAngelPI2=function(t,i,e){x1=t.x-i.x,x2=e.x-i.x,y1=t.y-i.y,y2=e.y-i.y,h=Math.sqrt(x1*x1+y1*y1),d2=Math.sqrt(x2*x2+y2*y2);var s=(x1*x2+y1*y2)/(h*d2);return s>1&&(s=1),s<-1&&(s=-1),Math.acos(s)},this.isLineInTriangle=function(i,e,h,n,a){return(t=this.getPointOfIntersection(i,e,n,a))?(s.x=t.x,s.y=t.y,s.z=0,s):(t=this.getPointOfIntersection(e,h,n,a))?(s.x=t.x,s.y=t.y,s.z=1,s):!!(t=this.getPointOfIntersection(h,i,n,a))&&(s.x=t.x,s.y=t.y,s.z=2,s)};var m,y,v,b,x=new k(0,0);this.getPointOfIntersection=function(t,i,e,h){return r=(t.x-i.x)*(h.y-e.y)-(t.y-i.y)*(h.x-e.x),c=(t.x-e.x)*(h.y-e.y)-(t.y-e.y)*(h.x-e.x),l=(t.x-i.x)*(t.y-e.y)-(t.y-i.y)*(t.x-e.x),d=l/r,(u=c/r)>=0&&u<=1&&d>=0&&d<=1?(g=t.x+u*(i.x-t.x),p=t.y+u*(i.y-t.y),x.x=g,x.y=p,x):null},this.korektToLine=function(t,i,e,h,s){f=this.getDistance(t,i),w=null==s?this.getAngle(t,i):s,0!=h&&(x=h<0?this.getVector(-h,w-Math.PI/2):this.getVector(h,w+Math.PI/2),t.x+=x.x,t.y+=x.y,i.x+=x.x,i.y+=x.y),x=this.getVector(e,w),i.x+=x.x,i.y+=x.y,x=this.getVector(e,w+Math.PI),t.x+=x.x,t.y+=x.y},this.getProsent3Point=function(t,i,e){return c=this.getDistance(t,i),(l=this.getDistance(t,e))/c},this.povotorOtAngel=function(t,i,e){return w=this.getAngle(t,i),f=this.getDistance(t,i),this.getVector(f,w+e)},this.testPositPoint=function(t,i,e){return null==e&&(e=100),Math.round(t.x*e)/e==Math.round(i.x*e)/e&&Math.round(t.y*e)/e==Math.round(i.y*e)/e},this.okrugAngel=function(t,i,e){var h=t;m=1,t<0&&(m=-1),y=Math.abs(t),v=Math.round(y/i)+1,b=0;for(var s=v;s>=0;s--){if(y>s*i-e&&y<s*i+e)return h=s*i*m;if(3==++b)return h}return h};var P=new k,C=new k,I=[];this.getLineCircleIntersectionPoints=function(t,i,e,h,s){I.length=0;var n=i.x-t.x,a=i.y-t.y,o=e.x-t.x,r=e.y-t.y,c=n*n+a*a,l=(n*o+a*r)/c,u=l*l-(o*o+r*r-h*h)/c;if(u<0)return I;var d=Math.sqrt(u),g=-l+d,p=-l-d;return P.set(t.x-n*g,t.y-a*g),this.isPointInLine(t,i,P)&&I.push(P),0==u?I:(C.set(t.x-n*p,t.y-a*p),this.isPointInLine(t,i,C)&&I.push(C),s&&2==I.length&&(m=this.getDistance(t,I[0]),y=this.getDistance(t,I[1]),m>y&&I.reverse()),I)},this.isPointInLine=function(t,i,e){var h=calc.getDistance(t,i),s=calc.getDistance(t,e),n=calc.getDistance(i,e);return calc.okrugNumber(s+n)===calc.okrugNumber(h)},this.getDistancePointToLine=function(t,i,e){var h=((i.y-t.y)*e.x-(i.x-t.x)*e.y+i.x*t.y-i.y*t.x)/calc.getDistance(t,i);return-calc.okrugNumber(Number.isFinite(h)?h:0)},this.getCircleCircleIntersectionPoints=function(t,i,e,h){var s,n,a,o,r;return I.length=0,(a=Math.sqrt(Math.pow(Math.abs(t.x-e.x),2)+Math.pow(Math.abs(t.y-e.y),2)))>i+h?I:(o=(i*i-h*h+a*a)/(2*a),r=Math.sqrt(Math.pow(i,2)-Math.pow(o,2)),isNaN(r)?I:(s=t.x+o*(e.x-t.x)/a,n=t.y+o*(e.y-t.y)/a,P.x=s+r*(e.y-t.y)/a,P.y=n-r*(e.x-t.x)/a,I.push(P),o==i?I:(C.x=s-r*(e.y-t.y)/a,C.y=n+r*(e.x-t.x)/a,I.push(C),I)))};var B=[new k,new k,new k,new k],M=[new k,new k,new k,new k];this.isIntersectionRect=function(t,i){return B[0].set(t.x,t.y),B[1].set(t.x+t.width,t.y),B[2].set(t.x+t.width,t.y+t.height),B[3].set(t.x,t.y+t.height),M[0].set(i.x,i.y),M[1].set(i.x+i.width,i.y),M[2].set(i.x+i.width,i.y+i.height),M[3].set(i.x,i.y+i.height),this.isIntersectionFromPoint(B,M)},this.isIntersectionFromPoint=function(t,i){for(var e=0;e<t.length-2;e++)for(var h=0;h<i.length-2;h++)if(calc.getPointOfIntersection(t[e],t[(e+2)%t.length],i[h],i[(h+2)%i.length]))return!0;for(e=0;e<t.length;e++)for(h=0;h<i.length;h++)if(calc.getPointOfIntersection(t[e],t[(e+1)%t.length],i[h],i[(h+1)%i.length]))return!0;for(e=0;e<i.length;e+=2)if(calc.contains(i[e].x,i[e].y,t))return!0;for(e=0;e<t.length;e+=2)if(calc.contains(t[e].x,t[e].y,i))return!0;return!1},this.isParalel=function(t,i,e,h,s){s=s||0;var n=Math.abs(calc.getAngle(t,i)%Math.PI),a=Math.abs(calc.getAngle(i,t)%Math.PI),o=Math.abs(calc.getAngle(e,h)%Math.PI),r=Math.abs(calc.getAngle(h,e)%Math.PI);return Math.min(Math.abs(n-o),Math.abs(a-r),Math.abs(n-r),Math.abs(a-o))<=s},this.rotationPoint=function(t,i,e){var h=0,s=0;e?(h=e.x+(t.x-e.x)*Math.cos(i)-(t.y-e.y)*Math.sin(i),s=e.y+(t.y-e.y)*Math.cos(i)+(t.x-e.x)*Math.sin(i)):(h=t.x*Math.cos(i)-t.y*Math.sin(i),s=t.y*Math.cos(i)+t.x*Math.sin(i)),t.x=h,t.y=s},this.rotationPointByLength=function(t,i,e){e=e||o;var h=calc.getDistance(t,e),s=calc.getLenghtCircle(h),n=i*(2*Math.PI/s);calc.rotationPoint(t,n,e)},this.isIntersectionTriangle=function(t,i,e,h,s,n){for(var a=!1,o=[t,i,e],r=[h,s,n],c=0;c<o.length&&!a;c++)a=calc.isInTriangle(h,s,n,o[c]);for(c=0;c<r.length&&!a;c++)a=calc.isInTriangle(t,i,e,r[c]);if(!a)for(c=0;c<o.length;c++)for(var l=0;l<r.length&&!a;l++)a=calc.getPointOfIntersection(o[c],o[(c+1)%o.length],r[l],r[(l+1)%r.length]);return a},this.getArrPointCircle=function(t,i,e,h,s,n,a){var o,r=calc.getAngle(e,t)-Math.PI,c=calc.getAngle(h,t)-Math.PI;o=a||[new k],s=s||5,!(n=n||!1)&&c<=r?c+=2*Math.PI:n&&r<=c&&(r+=2*Math.PI);var l=n?-1*(r-c):c-r,u=Math.ceil(Math.abs(l)/(2*Math.PI))*(s-1),d=l/(2*u),g=2*d,p=Math.cos(d),f=Math.sin(d),w=u-1,_=w%1/w,m=0,y=0,v=0,b=0,x=0;o[0].x=t.x+Math.cos(r)*i,o[0].y=t.y+Math.sin(r)*i;for(var P=0;P<=w;P++)m=d+r+(g*P+_*P),b=(p*(y=Math.cos(m))+f*(v=-Math.sin(m)))*i+t.x,x=(p*-v+f*y)*i+t.y,o[P+1]?(o[P+1].x=b,o[P+1].y=x):o.push(new k(b,x));return o},this.getLenghtCircle=function(t,i,e,h,s){i||(i=e=h=o);var n=calc.getAngle(e,i)-Math.PI,a=calc.getAngle(h,i)-Math.PI;return n===a&&e!==h?0:(!(s=s||!1)&&a<=n?a+=2*Math.PI:s&&n<=a&&(n+=2*Math.PI),Math.PI*t*(s?n-a:a-n)/Math.PI)},this.getLengthByWidth=function(t,i){var e=new k(0,0),h=new k(t,0),s=calc.getVector(i,.5*Math.PI);s.x=t/2;var n=calc.getCenterCircle(e,h,s);return n?calc.getLenghtCircle(calc.getDistance(n,e),n,e,h,i>0):t},this.getCenterCircle=function(t,i,e){var h=i.x-t.x,s=i.y-t.y,n=e.x-t.x,a=e.y-t.y,o=h*(t.x+i.x)+s*(t.y+i.y),r=n*(t.x+e.x)+a*(t.y+e.y),c=2*(h*(e.y-i.y)-s*(e.x-i.x));return 0===c?null:new k((a*o-s*r)/c,(h*r-n*o)/c)},this.getArcPoint=function(t,i,e,h,s){h=h||5;var n=calc.getAngle(t,i)+90*calc.DEG2RAD,a=calc.getVector(e,n),o=new k((t.x+i.x)/2,(t.y+i.y)/2);o.x+=a.x,o.y+=a.y;var r=calc.getCenterCircle(t,o,i);return r?calc.getArrPointCircle(r,calc.getDistance(r,t),t,i,h,e>0,s):[t,i]},this.getArea=function(t){for(var i=t.length,e=0,h=i-1,s=0;s<i;h=s++)e+=t[h].x*t[s].y-t[s].x*t[h].y;return.5*e||0},this.generateUUID=function(){for(var t=[],i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);return function(){var i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,h=4294967295*Math.random()|0,s=4294967295*Math.random()|0;return(t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&e]+t[e>>8&255]+"-"+t[e>>16&15|64]+t[e>>24&255]+"-"+t[63&h|128]+t[h>>8&255]+"-"+t[h>>16&255]+t[h>>24&255]+t[255&s]+t[s>>8&255]+t[s>>16&255]+t[s>>24&255]).toUpperCase()}}(),this.diffNum=function(t,i){return t>=0&&i>=0?Math.abs(t-i):t<=0&&i<=0?Math.abs(Math.abs(t)-Math.abs(i)):t<=0&&i>=0?Math.abs(t)+i:t>=0&&i<=0?t+Math.abs(i):void 0},this.getPercentNum=function(t,i,e){return((t=null!=t?t:0)-(i=null!=i?i:0))/((e=null!=e?e:100)-i)*100},this.getValueNum=function(t,i,e){return(t=null!=t?t:0)/100*((e=null!=e?e:100)-(i=null!=i?i:0))+i},this.getValueBetween=function(t,i,e){var h=Math.max(i,e),s=Math.min(i,e);return Math.max(Math.min(t,h),s)},this.contains=function(t,i,e){for(var h=!1,s=e.length,n=0,a=s-1;n<s;a=n++){if(e[n].x===t&&e[n].y===i)return!0;var o=e[n].x,r=e[n].y,c=e[a].x,l=e[a].y;r>i!=l>i&&t<(c-o)*(i-r)/(l-r)+o&&(h=!h)}return h};var R={maxX:0,minX:0,maxY:0,minY:0},E=new k,S=[new k,new k,new k,new k],L=new k;this.getBoundsRect=function(t,i){L.set(t.width/2,t.height/2),S[0].set(0,0),S[1].set(t.width,0),S[2].set(t.width,t.height),S[3].set(0,t.height);for(var e=0;e<S.length;e++)this.rotationPoint(S[e],i,L);R.maxX=-t.width,R.minX=t.width,R.maxY=-t.height,R.minY=t.height;for(e=0;e<S.length;e++)R.maxX=Math.max(R.maxX,S[e].x),R.minX=Math.min(R.minX,S[e].x),R.maxY=Math.max(R.maxY,S[e].y),R.minY=Math.min(R.minY,S[e].y);return E.x=R.minX,E.y=R.minY,E.width=R.maxX-R.minX,E.height=R.maxY-R.minY,E},this.getCurvatureByWidth=function(t,i){if(Math.abs(t)>2*i)return null;var e=Math.pow(Math.abs(t),2),h=Math.pow(i,2),s=Math.acos((h+h-e)/(2*h));return i*(1-Math.cos(s/2))*(t<0?-1:1)},this.getWidthByCurvature=function(t,i){return 2*i*Math.sin(Math.acos(1-2*Math.abs(t)/(2*i)))*(t<0?-1:1)};function A(t){return t!==Object(t)}this.compare=function t(i,e){if(A(i)&&A(e))return i===e;for(var h in i){if(i.hasOwnProperty(h)!==e.hasOwnProperty(h))return!1;switch(D(i[h])){case"object":if(!t(i[h],e[h]))return!1;break;case"function":if(void 0===e[h]||"compare"!==h&&i[h].toString()!==e[h].toString())return!1;break;case"number":if(Number(Number(i[h]).toFixed(3))!==Number(Number(e[h]).toFixed(3)))return!1;break;default:if(i[h]!==e[h])return!1}}for(var h in e)if(i.hasOwnProperty(h)!==e.hasOwnProperty(h))return!1;return!0}}function k(t,i,e){this._x=t||0,this._y=i||0,this._z=e||0,this.set=function(t,i,e){this._x=t||0,this._y=i||0,void 0!==e&&(this._z=e)},this.setPoint=function(t){this._x=t.x,this._y=t.y,void 0!==t.z&&(this._z=t.z)},this.getObj=function(){var t={};return t.x=this._x,t.y=this._y,t.z=this._z,t},this.copy=function(){return new k(this._x,this._y,this._z)}}function E(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}o.prototype=Object.create(PIXI.Container.prototype),o.prototype.constructor=o,Object.defineProperties(o.prototype,{activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}},activBtnClose:{set:function(t){if(this._activBtnClose!==t){this._activBtnClose=t;for(var i=0;i<this.arrBtn.length;i++)this.arrBtn[i].closeBtn.visible=this._activBtnClose}},get:function(){return this._activBtnClose}},width:{set:function(t){this._width!=t&&(this._width=t,this.pxd.borderRect.width=this._width/this._mashtab,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!=t&&(this._height=t,this.pxd.borderRect.height=this._height/this._mashtab,this.draw())},get:function(){return this._height}},otstup:{set:function(t){this._otstup!=t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},mashtab:{set:function(t){this._mashtab!=t&&(this._mashtab=t,this.pxd.borderRect.width=this._width/this._mashtab,this.pxd.borderRect.height=this._height/this._mashtab)},get:function(){return this._mashtab}}}),r.prototype=Object.create(PLButton.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{width:{set:function(t){this._width=t,this.panel.width=t,this.panel1.width=t,this.draw102(),this.drawCloseBtn()},get:function(){return this._width}},height:{set:function(t){this._height=t,this.panel.height=t,this.panel1.height=t,this.draw102(),this.drawCloseBtn()},get:function(){return this._height}}}),c.prototype=Object.create(PIXI.Container.prototype),c.prototype.constructor=c,Object.defineProperties(c.prototype,{activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}},width:{set:function(t){this._width!==t&&(this._width=t)},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.pdfEditorSketchRooms.height=this._height)},get:function(){return this._height}},mashtab:{set:function(t){this._mashtab!==t&&(this._mashtab=t,this.pdfEditorSketchRooms.mashtab=this._mashtab,this.pdfEditorSketchRooms.scale.set(this._mashtab,this._mashtab))},get:function(){return this._mashtab}},rotation:{set:function(t){this._rotation!==t&&(this._rotation=t)},get:function(){return this._rotation}},mashtabImage:{set:function(t){this._mashtabImage!==t&&(this._mashtabImage=t)},get:function(){return this._mashtabImage}}}),l.prototype=Object.create(PIXI.Container.prototype),l.prototype.constructor=l,l.prototype=Object.assign(l.prototype,EventDispatcher.prototype),Object.defineProperties(l.prototype,{activ:{set:function(t){this._activ!==t&&(this._activ=t,this.centeredImageCont.visible=this._activ)},get:function(){return this._activ}},widthCropComp:{set:function(t){this._widthCropComp!==t&&(this._widthCropComp=t,this.draw())},get:function(){return this._widthCropComp}},width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}},mashtabImage:{set:function(t){this._mashtabImage!==t&&(this._mashtabImage=t,this.pdfEditorCrop.mashtabImage=this._mashtabImage)},get:function(){return this._mashtabImage}},mashtab:{set:function(t){this._mashtab!==t&&(this._mashtab=t,this.pdfEditorCrop.mashtab=this._mashtab)},get:function(){return this._mashtab}},rotation:{set:function(t){this._rotation!==t&&(this._rotation=t,this.pdfEditorCrop.rotation=this._rotation)},get:function(){return this._rotation}}}),u.prototype=Object.create(PIXI.Container.prototype),u.prototype.constructor=u,Object.defineProperties(u.prototype,{color:{set:function(t){this._color!==t&&(this._color=t,this.draw())},get:function(){return this._color}},alpha:{set:function(t){this._alpha!==t&&(this._alpha=t,this.graphTop.alpha=this._alpha,this.graphBottom.alpha=this._alpha,this.graphLeft.alpha=this._alpha,this.graphRight.alpha=this._alpha)},get:function(){return this._alpha}},activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}},width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}},interactive:{set:function(t){this._interactive!==t&&(this._interactive=t,this.content.interactive=this._interactive,!0===this._interactive?(this.content.on("mousedown",this.onDown),this.content.on("mouseup",this.onUp),this.content.on("mouseout",this.onOut)):(this.content.off("mousedown",this.onDown),this.content.off("mouseup",this.onUp),this.content.off("mouseout",this.onOut)))},get:function(){return this._interactive}}}),d.prototype=Object.create(PIXI.Container.prototype),d.prototype.constructor=d,Object.defineProperties(d.prototype,{width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}}}),g.prototype=Object.create(PIXI.Container.prototype),g.prototype.constructor=g,Object.defineProperties(g.prototype,{index:{set:function(t){if(this._index!==t){this._index=t;for(var i=0;i<this.array.length;i++)this.array[i].activ=this._index===i}},get:function(){return this._index}},width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}},activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},languageComponent:{set:function(t){if(this._languageComponent!==t){this._languageComponent=t;for(var i=0;i<this.array.length;i++)this._languageComponent.setTextComp(this.array[i])}},get:function(){return this._languageComponent}}}),p.prototype=Object.create(PIXI.Container.prototype),p.prototype.constructor=p,Object.defineProperties(p.prototype,{textAlign:{set:function(t){this._textAlign!==t&&(this._textAlign=t,this.draw())},get:function(){return this._textAlign}},width:{set:function(t){this._width!==t&&(this._width=t,this.w.width=this._width,this.correctTextAlign(),this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t-this.w.wh,this.w.height=this._height,this.draw())},get:function(){return this._height}},x:{set:function(t){this._x!==t&&(this._x=t,this.w.x=this._x)},get:function(){return this._x}},y:{set:function(t){this._y!==t&&(this._y=t,this.w.y=this._y)},get:function(){return this._y}},text:{set:function(t){this.w._text=t,this.w.label.text=t},get:function(){return this.w._text}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},activ:{set:function(t){this._activ!==t&&(this._activ=t,this.w.panelTab.activ=this._activ,this.draw(),this.updateActiv())},get:function(){return this._activ}}}),f.prototype=Object.create(p.prototype),f.prototype.constructor=f,w.prototype=Object.create(p.prototype),w.prototype.constructor=w,Object.defineProperties(w.prototype,{otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},index:{set:function(t){this._index!==t&&(this._index=t,this.comboBox.index=this._index)},get:function(){return this._index}}}),_.prototype=Object.create(PIXI.Container.prototype),_.prototype.constructor=_,Object.defineProperties(_.prototype,{index:{set:function(t){this._index!==t&&(this._index=t,this._index<1&&(this._index=1),this._index>this.pages&&(this._index=this.pages),this.array[0].activMouse=1!==this._index,this.array[1].activMouse=this._index!==this.pages)},get:function(){return this._index}},width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},mashtab:{set:function(t){this._mashtab!==t&&(this._mashtab=t,this.draw())},get:function(){return this._mashtab}}}),m.prototype=Object.create(PIXI.Container.prototype),m.prototype.constructor=m,Object.defineProperties(m.prototype,{boolWheel:{set:function(t){this._boolWheel!=t&&(this._boolWheel=t,this.interactive=this._boolWheel,1==this._boolWheel?pl102Wheel.on(this,"mousewheel",this.mousewheel):pl102Wheel.off(this,"mousewheel",this.mousewheel))},get:function(){return this._boolWheel}},boolPositScrol:{set:function(t){this._boolPositScrol!=t&&(this._boolPositScrol=t,this.draw())},get:function(){return this._boolPositScrol}},boolPositOtctup:{set:function(t){this._boolPositOtctup!=t&&(this._boolPositOtctup=t,this.draw())},get:function(){return this._boolPositOtctup}},color:{set:function(t){if(this._color!=t){this._color=t;for(var i=0;i<this.arrayKesh.length;i++)this.arrayKesh[i].color=this.color}},get:function(){return this._color}},lineSize:{set:function(t){if(this._lineSize!=t){this._lineSize=t;for(var i=0;i<this.arrayKesh.length;i++)this.arrayKesh[i].lineSize=this.lineSize}},get:function(){return this._lineSize}},heightPic:{set:function(t){if(this._heightPic!=t){this._heightPic=t;for(var i=0;i<this.arrayKesh.length;i++)this.arrayKesh[i].height=this._heightPic;this.draw()}},get:function(){return this._heightPic}},widthPic:{set:function(t){if(this._widthPic!=t){this._widthPic=t;for(var i=0;i<this.arrayKesh.length;i++)this.arrayKesh[i].width=this._widthPic;this.draw()}},get:function(){return this._widthPic}},width:{set:function(t){this._width!=t&&(this._width=t,this.drawScrol(),this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!=t&&(this._height=t,this.drawScrol(),this.draw())},get:function(){return this._height}},otstup:{set:function(t){if(this._otstup!=t){this._otstup=t;for(var i=0;i<this.arrayKesh.length;i++)this.arrayKesh[i].otstup=this._otstup;this.draw()}},get:function(){return this._otstup}},otstup1:{set:function(t){this._otstup1!=t&&(this._otstup1=t,this.drawScrol(),this.draw())},get:function(){return this._otstup1}},kolII:{set:function(t){if(this._kolII!=t){this._kolII=t;var i=this.index;this.clearPosit(),this.index=i,this.drawScrol(),this.draw()}},get:function(){return this._kolII}},index:{set:function(t){if(null!=this.array[t]&&this.korektPoIndex(t),this._index!=t){this._index=t;for(var i=0;i<this.array.length;i++)this._index==i?this.array[i].activ=!0:this.array[i].activ=!1}},get:function(){return this._index}}}),y.prototype=Object.create(PIXI.Container.prototype),y.prototype.constructor=y,Object.defineProperties(y.prototype,{activ:{set:function(t){this._activ!=t&&(this._activ=t,this.draw())},get:function(){return this._activ}},color:{set:function(t){this._color!=t&&(this._color=t,this.draw())},get:function(){return this._color}},lineSize:{set:function(t){this._lineSize!=t&&(this._lineSize=t,this.draw())},get:function(){return this._lineSize}},otstup:{set:function(t){this._otstup!=t&&(this._otstup=t,this.draw())},get:function(){return this._otstup}},width:{set:function(t){this._width!=t&&(this._width=t,this.panel.width=this._width,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!=t&&(this._height=t,this.panel.height=this._height,this.draw())},get:function(){return this._height}}}),v.prototype=Object.create(PIXI.Container.prototype),v.prototype.constructor=v,Object.defineProperties(v.prototype,{index:{set:function(t){this._index!==t&&(this._index=t)},get:function(){return this._index}},width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.gallSketchRooms.height=this._height,this.draw())},get:function(){return this._height}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.gallSketchRooms.otstup=this._otstup,this.draw())},get:function(){return this._otstup}},otstup1:{set:function(t){this._otstup1!==t&&(this._otstup1=t,this.draw())},get:function(){return this._otstup1}},language:{set:function(t){this._language!==t&&(this._language=t,this.gallSketchRooms.language=this._language)},get:function(){return this._language}}}),b.prototype=Object.create(m.prototype),b.prototype.constructor=b,Object.defineProperties(b.prototype,{language:{set:function(t){if(this._language!==t){this._language=t;for(var i=0;i<this.array.length;i++)this.array[i].language=this._language;this.draw()}},get:function(){return this._language}}}),x.prototype=Object.create(y.prototype),x.prototype.constructor=x,Object.defineProperties(x.prototype,{text:{set:function(t){this._text!==t&&(this._text=t,this.label.text=this._text,this.createParam.text=this._text,this.postDraw())},get:function(){return this._text}},language:{set:function(t){this._language!==t&&(this._language=t,null!==this.translations&&(this.text=this.translations[this._language]))},get:function(){return this._language}}}),P.prototype=Object.create(PIXI.Container.prototype),P.prototype.constructor=P,P.prototype=Object.assign(P.prototype,EventDispatcher.prototype),Object.defineProperties(P.prototype,{width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.pdfEditorMenuNav.height=this._height,this.draw())},get:function(){return this._height}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.pdfEditorMenuFooter.otstup=this._otstup,this.draw())},get:function(){return this._otstup}},otstup1:{set:function(t){this._otstup1!==t&&(this._otstup1=t,this.pdfEditorMenuNav.otstup=this._otstup1,this.draw())},get:function(){return this._otstup1}},activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}},isHideMenuNav:{set:function(t){this._isHideMenuNav=t,this.pdfEditorMenuNav.visible=this._isHideMenuNav},get:function(){return this._isHideMenuNav}},mashtab:{set:function(t){this._mashtab!==t&&(this._mashtab=t,this.scale.set(this._mashtab,this._mashtab),this.pdfEditorMenuFooter.mashtab=this._mashtab,this.pdfEditorMenuNav.mashtab=this._mashtab,this.draw())},get:function(){return this._mashtab}},isHideSketchRooms:{set:function(t){this._isHideSketchRooms=t,this.pdfEditorMenuSketchRooms.visible=this._isHideSketchRooms,this.dispatchEvent(new B("onDown",{name:"redrawPage",width:this.sketchRoomsWidth,isRedrawPage:this._isHideSketchRooms}))},get:function(){return this._isHideSketchRooms}},languageComponent:{set:function(t){this._languageComponent!==t&&(this._languageComponent=t,this.pdfEditorMenuSketchRooms.language=this._languageComponent.value,this.pdfEditorMenuFooter.languageComponent=this._languageComponent)},get:function(){return this._languageComponent}}}),C.prototype=Object.create(PIXI.Container.prototype),C.prototype.constructor=C,C.prototype=Object.assign(C.prototype,EventDispatcher.prototype),Object.defineProperties(C.prototype,{width:{set:function(t){this._width!==t&&(this._width=t,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.draw())},get:function(){return this._height}},activ:{set:function(t){this._activ!==t&&(this._activ=t,this.visible=this._activ)},get:function(){return this._activ}}}),I.prototype=Object.create(PIXI.Container.prototype),I.prototype.constructor=I,I.prototype=Object.assign(I.prototype,EventDispatcher.prototype),Object.defineProperties(I.prototype,{width:{set:function(t){this._width!==t&&(this._width=t,this.panel.width=this._width,this.pdfEditorMenu.width=this._width,this.pdfEditorPreloader.width=this._width,this.draw())},get:function(){return this._width}},height:{set:function(t){this._height!==t&&(this._height=t,this.panel.height=this._height,this.pdfEditorMenu.height=this._height,this.pdfEditorPreloader.height=this._height,this.draw())},get:function(){return this._height}},otstup:{set:function(t){this._otstup!==t&&(this._otstup=t,this.pdfEditorMenu.otstup=this._otstup)},get:function(){return this._otstup}},otstup1:{set:function(t){this._otstup1!==t&&(this._otstup1=t,this.pdfEditorMenu.otstup1=this._otstup1,this.draw())},get:function(){return this._otstup1}},mashtab:{set:function(t){this._mashtab!==t&&(this._mashtab=t,this.pdfEditorMenu.mashtab=this._mashtab,this.pdfEditorPage.mashtab=this._mashtab,this.draw())},get:function(){return this._mashtab}},languageComponent:{set:function(t){this._languageComponent!==t&&(this._languageComponent=t,this.pdfEditorMenu.languageComponent=this._languageComponent)},get:function(){return this._languageComponent}}}),k.prototype={set x(t){this._x=t},get x(){return this._x},set y(t){this._y=t},get y(){return this._y},set z(t){this._z=t},get z(){return this._z}};var S=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.screenWidth=100,this.screenHeight=100,this.resolution=2,this.stage=new PIXI.Container,this.renderer=new PIXI.autoDetectRenderer(this.screenWidth,this.screenHeight,{antialias:!0,transparent:!0,preserveDrawingBuffer:!0}),this.renderer.view.style.position="fixed",this.renderer.maskManager.enableScissor=!1}var i,e,h;return i=t,(e=[{key:"onWindowResize",value:function(t,i){this.screenWidth=t,this.screenHeight=i;var e=this.renderer.resolution;this.renderer.view.style.width=this.screenWidth+"px",this.renderer.view.style.height=this.screenHeight+"px",this.renderer.view.style.top="0px",this.renderer.view.style.left="0px",this.renderer.resolution=1,this.renderer.resize(this.screenWidth,this.screenHeight),this.renderer.resolution=e}},{key:"render",value:function(){this.renderer.resolution=window.devicePixelRatio*this.resolution,this.renderer.render(this.stage)}},{key:"init",value:function(t){t.appendChild(this.renderer.view)}},{key:"add",value:function(t){this.stage.addChild(t)}}])&&E(i.prototype,e),h&&E(i,h),t}();function L(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}var A=function(){function t(){var i=this;!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.content=document.createElement("div"),this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.content2d=this.getContainer(),this.content2d.style.zIndex=0,this.content.appendChild(this.content2d),this.scene2d=new S,this.ticker=new PIXI.ticker.Ticker,this.ticker.minFPS=50,this.ticker.add(this.render,this);this.calc=new R,this.pl102=new StylePL102(this.scene2d.stage,this.scene2d.renderer,this.content),this.contenScene=new PIXI.Container,this.scene2d.add(this.contenScene),this.pdfEditor=new I(this.contenScene),this.pdfEditor.setIcons([["resources/64x64_10.png","resources/64x64_1.png","resources/64x64_4.png","resources/64x64_5.png","resources/64x64_2.png","resources/64x64_3.png"],["resources/64x64_6.png","resources/64x64_8.png","resources/64x64_9.png"],["resources/52x52_10.png","resources/52x52_11.png"]]),this.pdfEditor.pdfEditorConvert.addEventListener("loadPage",function(t){i.pdfEditor.pdfEditorPage.draw()}),this.init()}var i,e,h;return i=t,(e=[{key:"getContainer",value:function(){var t=document.createElement("div");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t}},{key:"render",value:function(){this.scene2d.render(),TWEEN.update()}},{key:"init",value:function(){this.scene2d.init(this.content2d),document.body.appendChild(this.content),this.ticker.start(),this.pdfEditor.width=this.screenWidth,this.pdfEditor.height=this.screenHeight}},{key:"onWindowResize",value:function(t,i){this.screenWidth=t,this.screenHeight=i,this.scene2d.onWindowResize(t,i),this.pdfEditor.width=t,this.pdfEditor.height=i}}])&&L(i.prototype,e),h&&L(i,h),t}(),O=null;function X(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;null!==O&&O.onWindowResize(t,i)}window.onload=function(){O=new A,X()},window.onresize=X}]);